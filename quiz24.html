<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FE9N3JWSGN"></script>
<script src="analytics.js"></script>
<title>Len's 80sGrid.com Music Edition - Quiz 24</title>
<meta property="og:type" content="website">
<meta property="og:url" content="https://80sgrid.com/quiz24.html">
<meta property="og:title" content="Len's 80sGrid.com Music Edition - Quiz 24">
<meta property="og:description" content="Test your arena rock knowledge with Journey, Foreigner, and REO Speedwagon!">
<meta property="og:image" content="https://www.dropbox.com/scl/fi/xe71bdsordlklx2o1wz22/new-header.png?rlkey=ti8auttvj17cao8ipecef0vu2&st=s3gjdvos&raw=1">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://80sgrid.com/quiz24.html">
<meta property="twitter:title" content="Len's 80sGrid.com Music Edition - Quiz 24">
<meta property="twitter:description" content="Test your arena rock knowledge with Journey, Foreigner, and REO Speedwagon!">
<meta property="twitter:image" content="https://www.dropbox.com/scl/fi/xe71bdsordlklx2o1wz22/new-header.png?rlkey=ti8auttvj17cao8ipecef0vu2&st=s3gjdvos&raw=1">
<style>
body {
font-family: Arial, sans-serif;
display: flex;
justify-content: center;
align-items: center;
min-height: 100vh;
margin: 0;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
padding: 20px;
overflow-x: hidden;
box-sizing: border-box;
}
.container {
background: white;
padding: 30px;
border-radius: 15px;
box-shadow: 0 10px 40px rgba(0,0,0,0.3);
max-width: 700px;
width: 100%;
box-sizing: border-box;
}
.logo-img { display:block; margin:0 auto 10px; max-width:100%; height:auto; }
.tagline-sub {
text-align: center;
font-family: 'Georgia', serif;
font-size: 1.4em;
font-style: italic;
color: #6a0dad;
letter-spacing: 2px;
margin: 0 0 20px;
text-shadow: 1px 1px 3px rgba(0,0,0,0.15);
}
.subtitle {
text-align: center;
margin-bottom: 30px;
font-size: 4.5em;
font-weight: bold;
color: #ff006e;
text-shadow: 3px 3px 0px #fb5607, 6px 6px 0px #ffbe0b, 9px 9px 0px #8338ec, 12px 12px 0px #3a86ff;
font-family: 'Arial Black', sans-serif;
letter-spacing: 5px;
transform: perspective(500px) rotateX(5deg);
}
.how-to-play {
background: linear-gradient(135deg, #FF1493 0%, #8B00FF 50%, #00CED1 100%);
padding: 20px;
border-radius: 12px;
margin-bottom: 20px;
color: white;
box-shadow: 0 0 20px rgba(255,20,147,.4);
border: 3px solid rgba(255,255,255,.3);
}
.how-to-play h2 { text-align:center; margin-top:0; margin-bottom:10px; font-size:1.5em; text-shadow:2px 2px 4px rgba(0,0,0,.5); }
.how-to-play p { margin:0; line-height:1.6; text-shadow:1px 1px 2px rgba(0,0,0,.5); }
.grid {
display: grid;
grid-template-columns: 100px repeat(3, 1fr);
grid-template-rows: 70px repeat(3, 110px);
gap: 8px;
margin-bottom: 20px;
}
.header {
background: #667eea;
color: white;
display: flex;
align-items: center;
justify-content: center;
text-align: center;
padding: 8px;
border-radius: 8px;
font-weight: bold;
font-size: 0.85em;
line-height: 1.2;
word-wrap: break-word;
hyphens: auto;
}
.header.col-header:nth-child(2) { background:linear-gradient(135deg,#FF1493,#FF69B4); box-shadow:0 0 15px rgba(255,20,147,.6); border:2px solid #FF1493; }
.header.col-header:nth-child(3) { background:linear-gradient(135deg,#00CED1,#1E90FF); box-shadow:0 0 15px rgba(0,206,209,.6); border:2px solid #00CED1; }
.header.col-header:nth-child(4) { background:linear-gradient(135deg,#FFD700,#FFA500); box-shadow:0 0 15px rgba(255,215,0,.6); border:2px solid #FFD700; color:#000; font-weight:900; }
.header.row-header { background:linear-gradient(135deg,#8B00FF,#DA70D6); box-shadow:0 0 15px rgba(139,0,255,.6); border:2px solid #8B00FF; }
.col-header { grid-row: 1; }
.row-header { grid-column: 1; }
.cell { background:#f8f9fa; border:2px solid #dee2e6; border-radius:8px; display:flex; align-items:center; justify-content:center; padding:14px 8px; cursor:pointer; }
.cell input { width:100%; padding:10px 8px; border:none; background:transparent; text-align:center; font-size:0.7em; font-weight:bold; outline:none; cursor:pointer; pointer-events:none; line-height:1.8; }
.cell input::placeholder { color:#adb5bd; font-style:italic; white-space:normal; word-spacing:100vw; }
.cell.correct { background:#d4edda; border-color:#28a745; }
.cell.incorrect { background:#f8d7da; border-color:#dc3545; }
.button-container { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-bottom:10px; }
button { background:#667eea; color:white; border:none; padding:12px 25px; border-radius:8px; cursor:pointer; font-size:1em; transition:background 0.3s; }
button:hover { background:#5568d3; }
#results { margin-top:20px; padding:20px; background:#e7f3ff; border:2px solid #667eea; border-radius:8px; text-align:center; }
.input-modal {
position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
background: white; padding: 30px; border-radius: 15px;
box-shadow: 0 10px 50px rgba(0,0,0,0.5); z-index: 3500;
display: none; min-width: 300px; max-width: 90%; box-sizing: border-box;
}
.input-modal.active { display: block; }
.input-modal-overlay {
position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 3499; display: none;
}
.input-modal-overlay.active { display: block; }
.input-modal h3 { margin-top: 0; margin-bottom: 20px; color: #333; font-size: 1.2em; text-align: center; }
.input-modal input {
width: 100%; padding: 15px; font-size: 1.2em; border: 2px solid #667eea;
border-radius: 8px; margin-bottom: 15px; box-sizing: border-box;
}
.input-modal-buttons { display: flex; gap: 10px; }
.input-modal-buttons button { flex: 1; padding: 12px; font-size: 1em; }
.next-quiz-btn {
display: inline-block; margin: 15px auto;
background: linear-gradient(135deg, #FF1493, #8B00FF); color: white;
text-decoration: none; padding: 18px 40px; border-radius: 12px;
font-size: 1.3em; font-weight: 900; font-family: 'Arial Black', sans-serif;
letter-spacing: 2px; box-shadow: 0 0 25px rgba(255,20,147,0.7), 0 5px 15px rgba(0,0,0,0.3);
animation: pulse 1.5s infinite;
}
.next-quiz-btn:hover { transform: scale(1.05); }
@keyframes pulse {
0%,100% { box-shadow:0 0 25px rgba(255,20,147,0.7),0 5px 15px rgba(0,0,0,0.3); }
50% { box-shadow:0 0 45px rgba(255,20,147,1),0 5px 20px rgba(0,0,0,0.4); }
}
.survey-question {
background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
padding: 25px 18px; border-radius: 12px; margin-top: 20px; color: white;
box-shadow: 0 0 20px rgba(102,126,234,.4); border: 3px solid rgba(255,255,255,.3);
}
.survey-question h3 { text-align:center; margin-top:0; margin-bottom:14px; font-size:1.1em; }
.survey-options { display:flex; flex-direction:column; gap:8px; }
.survey-option {
padding:12px 14px; display:flex; align-items:center; gap:12px;
text-align:left; border-radius:10px; cursor:pointer; transition:all .3s; border:2px solid transparent;
}
.survey-option:hover { transform:scale(1.02); filter:brightness(1.15); }
.survey-option.selected { box-shadow:0 0 25px rgba(0,255,0,0.6),inset 0 0 15px rgba(0,255,0,0.1); border-color:#00ff00 !important; transform:scale(1.03); }
.stats-modal { display:none; position:fixed; inset:0; z-index:3000; background:rgba(0,0,0,0.75); align-items:center; justify-content:center; }
.stats-modal.show { display:flex; }
.stats-box { background:#000; border:3px solid #FF1493; border-radius:12px; padding:35px 30px; width:90%; max-width:320px; font-family:'Courier New',monospace; box-shadow:0 0 40px rgba(255,20,147,0.6); }
.stats-box h2 { color:#FF1493; text-shadow:0 0 10px #FF1493; font-size:1.3em; letter-spacing:3px; margin:0 0 5px; text-align:center; }
.stats-sub { color:#00ffff; text-align:center; font-size:0.75em; letter-spacing:2px; margin-bottom:20px; }
.stat-row { border-bottom:1px solid rgba(255,20,147,0.3); padding:12px 0; display:flex; justify-content:space-between; align-items:center; }
.stat-label { color:#aaa; font-size:0.85em; letter-spacing:1px; }
.stat-value { color:#ffff00; font-size:1.2em; font-weight:bold; text-shadow:0 0 8px #ffff00; }
.stats-close { display:block; margin:25px auto 0; background:#FF1493; color:#000; border:none; padding:10px 30px; font-family:'Courier New',monospace; font-weight:bold; font-size:1em; cursor:pointer; letter-spacing:2px; border-radius:4px; }
.limit-modal { display:none; position:fixed; inset:0; z-index:3000; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; }
.limit-modal.show { display:flex; }
.limit-box { background:#000; border:4px solid #FF1493; border-radius:12px; padding:40px 30px; text-align:center; font-family:'Courier New',monospace; max-width:320px; width:90%; box-shadow:0 0 40px rgba(255,20,147,0.7); }
.limit-box h2 { color:#ffff00; text-shadow:0 0 10px #ffff00; font-size:1.4em; letter-spacing:3px; margin-bottom:15px; }
.limit-box p { color:#00ff00; line-height:1.7; margin-bottom:20px; }
.limit-box button { background:#FF1493; color:#000; border:none; padding:12px 30px; font-family:'Courier New',monospace; font-weight:bold; font-size:1em; cursor:pointer; border-radius:4px; }
.high-score-entry { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#000; color:#00ff00; padding:40px; border-radius:10px; border:4px solid #00ff00; box-shadow:0 0 30px rgba(0,255,0,.5); text-align:center; z-index:1000; font-family:'Courier New',monospace; width:90%; max-width:340px; box-sizing:border-box; }
.high-score-entry h2 { color:#ffff00; text-shadow:0 0 10px #ffff00; margin-bottom:20px; }
.initials-input { display:flex; gap:15px; justify-content:center; margin:20px 0; }
.initials-input input { width:60px; height:80px; font-size:3em; text-align:center; background:#000; border:3px solid #00ff00; color:#00ff00; text-transform:uppercase; font-family:'Courier New',monospace; }
.arcade-button { background:#00ff00; color:#000; border:none; padding:15px 40px; font-size:1.2em; font-weight:bold; cursor:pointer; font-family:'Courier New',monospace; box-shadow:0 0 20px rgba(0,255,0,.5); }
.leaderboard {
margin-top: 30px;
background: #000 url('https://www.dropbox.com/scl/fi/awkqv845s9slzs58wbz12/highscores.png?rlkey=r7n3hyq795099jgavqyk5xe1t&st=4rsy91bk&raw=1') center top / contain no-repeat;
color: #00ff00; padding: 15px; border-radius: 10px; border: 3px solid #00ff00;
font-family: 'Courier New', monospace; box-shadow: 0 0 30px rgba(0,255,0,.5),inset 0 0 20px rgba(0,255,0,.1);
min-height: 300px; width: 100%; box-sizing: border-box;
}
.leaderboard-scores-wrap { margin-top:160px; background:rgba(0,0,0,0.75); border-radius:8px; padding:15px 10px 10px; }
.leaderboard-subtitle { text-align:center; color:#00ffff; margin-bottom:15px; font-size:0.85em; letter-spacing:3px; }
.leaderboard-item { display:grid; grid-template-columns:40px 70px 1fr 80px; padding:8px 5px; border-bottom:1px solid rgba(0,255,0,.3); font-size:1em; letter-spacing:2px; }
.leaderboard-item:last-child { border-bottom:none; }
.leaderboard-rank { color:#ffff00; text-shadow:0 0 5px #ffff00; }
.leaderboard-initials { color:#00ff00; font-weight:bold; text-shadow:0 0 5px #00ff00; }
.leaderboard-score { color:#ff00ff; text-shadow:0 0 5px #ff00ff; }
.leaderboard-date { color:#00ffff; text-align:right; font-size:0.8em; }
.lifeline-bar { display:flex; align-items:center; justify-content:center; gap:10px; margin:0 0 16px; padding:10px 18px; background:linear-gradient(135deg,#fff0f8,#f0f0ff); border:2px solid rgba(139,0,255,0.25); border-radius:10px; font-family:'Arial Black',sans-serif; }
.lifeline-label { font-size:0.8em; font-weight:900; color:#555; letter-spacing:1px; text-transform:uppercase; }
.lifeline-pips { display:flex; gap:5px; }
.lifeline-pip { width:24px; height:24px; border-radius:50%; background:linear-gradient(135deg,#FF1493,#8B00FF); box-shadow:0 0 8px rgba(255,20,147,0.5); display:flex; align-items:center; justify-content:center; font-size:0.75em; transition:all 0.3s; }
.lifeline-pip.used { background:#dee2e6; box-shadow:none; }
.lifeline-count { font-size:0.82em; color:#888; font-style:italic; }
.lifeline-count.empty { color:#dc3545; font-weight:bold; font-style:normal; }
.no-lifeline-badge { display:none; text-align:center; margin:10px 0; padding:8px 14px; background:linear-gradient(135deg,#FFD700,#FFA500); border-radius:8px; font-weight:900; font-size:0.9em; color:#000; box-shadow:0 0 12px rgba(255,215,0,0.5); }
.mc-toggle-btn { display:block; width:100%; margin-top:12px; padding:11px; background:linear-gradient(135deg,#FF1493,#8B00FF); color:white; border:none; border-radius:8px; font-size:0.95em; font-weight:bold; cursor:pointer; letter-spacing:0.5px; transition:opacity 0.2s; }
.mc-toggle-btn:hover { opacity:0.88; }
.mc-toggle-btn:disabled { opacity:0.35; cursor:not-allowed; }
.mc-section { display:none; margin-top:8px; }
.mc-section.visible { display:block; }
.mc-option { display:block; width:100%; margin-bottom:10px; padding:14px 12px; background:#f8f0ff; border:2px solid #8B00FF; border-radius:10px; font-size:0.95em; font-weight:bold; color:#4a0080; cursor:pointer; text-align:center; transition:background 0.15s,transform 0.1s; box-sizing:border-box; }
.mc-option:hover { background:#e8c8ff; transform:scale(1.02); }
.text-section.hidden { display:none; }
.group-tabs { display:flex; justify-content:center; gap:6px; margin-bottom:10px; }
.group-tab { flex:1; padding:8px 4px; text-align:center; font-family:Arial,sans-serif; font-size:0.75em; font-weight:900; letter-spacing:1px; border:2px solid #ddd; border-radius:8px; background:#f0f0f0; color:#999; cursor:pointer; transition:all 0.3s; }
.group-tab:hover { border-color:#667eea; color:#667eea; background:#f0f0ff; }
.group-tab.active { border-color:#667eea; color:white; background:#667eea; box-shadow:0 3px 10px rgba(102,126,234,0.4); }
.quiz-grid-nav { display:grid; grid-template-columns:repeat(5,1fr); gap:8px; margin-bottom:10px; }
.quiz-grid-nav a { display:flex; align-items:center; justify-content:center; aspect-ratio:1.2; border-radius:10px; font-family:'Arial Black',sans-serif; font-size:1.1em; font-weight:900; letter-spacing:1px; color:white; cursor:pointer; transition:all 0.2s; text-decoration:none; border:none; position:relative; }
.quiz-grid-nav a:hover { transform:scale(1.08); }
.quiz-grid-nav a.easy { background:linear-gradient(135deg,#28a745,#20913b); box-shadow:0 3px 10px rgba(40,167,69,0.4); }
.quiz-grid-nav a.easy:hover { box-shadow:0 5px 18px rgba(40,167,69,0.6); }
.quiz-grid-nav a.medium { background:linear-gradient(135deg,#fd7e14,#e06b00); box-shadow:0 3px 10px rgba(253,126,20,0.4); }
.quiz-grid-nav a.medium:hover { box-shadow:0 5px 18px rgba(253,126,20,0.6); }
.quiz-grid-nav a.hard { background:linear-gradient(135deg,#dc3545,#c42030); box-shadow:0 3px 10px rgba(220,53,69,0.4); }
.quiz-grid-nav a.hard:hover { box-shadow:0 5px 18px rgba(220,53,69,0.6); }
.quiz-grid-nav a.current { outline:3px solid #667eea; outline-offset:2px; animation:navpulse 2s ease-in-out infinite; }
@keyframes navpulse { 0%,100%{outline-color:#667eea;} 50%{outline-color:#FF1493;} }
.quiz-grid-nav a.played { background:linear-gradient(135deg,#bbb,#999); box-shadow:0 2px 6px rgba(0,0,0,0.15); opacity:0.7; }
.quiz-grid-nav a.played:hover { transform:none; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
.quiz-grid-nav a.played::after { content:'\2713'; position:absolute; top:1px; right:4px; font-size:0.5em; color:white; opacity:0.8; }
.nav-legend2 { text-align:center; font-size:0.72em; color:#666; margin-bottom:4px; line-height:1.8; }
.nav-status-bar { background:#f0f4ff; border:2px solid #667eea; border-radius:10px; padding:8px 14px; text-align:center; font-size:0.82em; font-weight:bold; color:#667eea; margin-bottom:4px; }
.nav-status-bar.limit-reached { background:#fff0f0; border-color:#dc3545; color:#dc3545; }
.nav-replay-note { text-align:center; font-size:0.72em; color:#888; font-style:italic; margin-bottom:14px; line-height:1.4; }
.group-tabs { display:flex; justify-content:center; gap:6px; margin-bottom:10px; }
.group-tab { flex:1; padding:8px 4px; text-align:center; font-family:Arial,sans-serif; font-size:0.75em; font-weight:900; letter-spacing:1px; border:2px solid #ddd; border-radius:8px; background:#f0f0f0; color:#999; cursor:pointer; transition:all 0.3s; }
.group-tab:hover { border-color:#667eea; color:#667eea; background:#f0f0ff; }
.group-tab.active { border-color:#667eea; color:white; background:#667eea; box-shadow:0 3px 10px rgba(102,126,234,0.4); }
.quiz-grid-nav { display:grid; grid-template-columns:repeat(5,1fr); gap:8px; margin-bottom:10px; }
.quiz-grid-nav a { display:flex; align-items:center; justify-content:center; aspect-ratio:1.2; border-radius:10px; font-family:'Arial Black',sans-serif; font-size:1.1em; font-weight:900; letter-spacing:1px; color:white; cursor:pointer; transition:all 0.2s; text-decoration:none; border:none; position:relative; }
.quiz-grid-nav a:hover { transform:scale(1.08); }
.quiz-grid-nav a.easy { background:linear-gradient(135deg,#28a745,#20913b); box-shadow:0 3px 10px rgba(40,167,69,0.4); }
.quiz-grid-nav a.easy:hover { box-shadow:0 5px 18px rgba(40,167,69,0.6); }
.quiz-grid-nav a.medium { background:linear-gradient(135deg,#fd7e14,#e06b00); box-shadow:0 3px 10px rgba(253,126,20,0.4); }
.quiz-grid-nav a.medium:hover { box-shadow:0 5px 18px rgba(253,126,20,0.6); }
.quiz-grid-nav a.hard { background:linear-gradient(135deg,#dc3545,#c42030); box-shadow:0 3px 10px rgba(220,53,69,0.4); }
.quiz-grid-nav a.hard:hover { box-shadow:0 5px 18px rgba(220,53,69,0.6); }
.quiz-grid-nav a.current { outline:3px solid #667eea; outline-offset:2px; animation:navpulse 2s ease-in-out infinite; }
@keyframes navpulse { 0%,100%{outline-color:#667eea;} 50%{outline-color:#FF1493;} }
.quiz-grid-nav a.played { background:linear-gradient(135deg,#bbb,#999); box-shadow:0 2px 6px rgba(0,0,0,0.15); opacity:0.7; }
.quiz-grid-nav a.played:hover { transform:none; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
.quiz-grid-nav a.played::after { content:'\2713'; position:absolute; top:1px; right:4px; font-size:0.5em; color:white; opacity:0.8; }
.nav-legend2 { text-align:center; font-size:0.72em; color:#666; margin-bottom:4px; line-height:1.8; }
.nav-status-bar { background:#f0f4ff; border:2px solid #667eea; border-radius:10px; padding:8px 14px; text-align:center; font-size:0.82em; font-weight:bold; color:#667eea; margin-bottom:4px; }
.nav-status-bar.limit-reached { background:#fff0f0; border-color:#dc3545; color:#dc3545; }
.nav-replay-note { text-align:center; font-size:0.72em; color:#888; font-style:italic; margin-bottom:14px; line-height:1.4; }
.difficulty-badge { display:flex; align-items:center; justify-content:center; gap:12px; margin:0 0 20px; padding:14px 20px; border-radius:12px; border:2px solid var(--badge-color); background:color-mix(in srgb,var(--badge-color) 10%,white); box-shadow:0 0 20px var(--badge-glow); }
.badge-left { text-align:left; }
.badge-label { font-family:'Arial Black',sans-serif; font-size:1.1em; font-weight:900; letter-spacing:2px; color:var(--badge-color); text-transform:uppercase; }
.badge-score { font-size:0.8em; color:#666; font-weight:bold; margin-top:2px; }
.badge-stars { font-size:1.5em; color:var(--badge-color); letter-spacing:2px; }
.badge-desc { font-size:0.75em; color:#888; font-style:italic; margin-top:2px; }
.footnote-box { background:#f8f0ff; border-left:4px solid #8B00FF; padding:14px 16px; border-radius:8px; margin-bottom:20px; font-size:0.85em; line-height:1.7; color:#444; }
.footnote-box strong { color:#6a0dad; display:block; margin-bottom:6px; font-size:1em; }
.footnote-box li { margin-left:16px; margin-bottom:4px; }
.yn-toast { position:fixed; top:20%; left:50%; transform:translate(-50%,-50%); background:linear-gradient(135deg,#FFD700,#FFA500); color:#000; padding:16px 28px; border-radius:12px; font-family:'Arial Black',sans-serif; font-size:1em; font-weight:900; letter-spacing:1px; box-shadow:0 0 30px rgba(255,215,0,0.7); z-index:5000; opacity:0; transition:opacity 0.3s; pointer-events:none; text-align:center; }
.yn-toast.show { opacity:1; }
.post-quiz-progress { background:linear-gradient(135deg,#f0f0ff,#fff0f8); border:2px solid rgba(102,126,234,0.3); border-radius:12px; padding:16px 20px; margin:20px 0; text-align:center; }
.progress-pips { display:flex; justify-content:center; gap:8px; margin-bottom:10px; }
.progress-pip { width:40px; height:8px; border-radius:4px; transition:all 0.3s ease; }
.progress-pip.filled { background:linear-gradient(135deg,#FF1493,#8B00FF); }
.progress-pip.empty { background:#dee2e6; }
.progress-text { font-size:0.9em; color:#555; }
.post-quiz-wrap { background:linear-gradient(135deg,#f8f0ff,#fff8f0); border:2px solid rgba(255,165,0,0.3); border-radius:14px; padding:24px 20px; margin:20px 0; text-align:center; }
.wrap-title { font-size:1.2em; font-weight:900; color:#8B00FF; margin-bottom:8px; font-family:'Arial Black',sans-serif; }
.wrap-text { font-size:0.95em; color:#555; line-height:1.6; margin-bottom:16px; }
.bonus-code-box { background:linear-gradient(135deg,rgba(0,30,15,0.9),rgba(0,20,40,0.9)); border-radius:12px; padding:22px; border:2px solid rgba(0,255,136,0.4); box-shadow:0 0 30px rgba(0,255,136,0.15),inset 0 0 30px rgba(0,255,136,0.05); text-align:center; }
.bonus-prompt { font-family:'Courier New',monospace; font-size:1.05em; color:#00ff88; margin-bottom:8px; font-weight:700; text-shadow:0 0 10px rgba(0,255,136,0.4); }
.bonus-prompt .gold { color:#ffd700; text-shadow:0 0 12px rgba(255,215,0,0.5); }
.bonus-desc { font-size:0.9em; color:#ccc; margin-bottom:12px; line-height:1.5; }
.bonus-desc strong { color:#fff; }
.bonus-row { display:flex; gap:8px; }
.bonus-input { flex:1; background:rgba(0,0,0,0.5); border:1px solid rgba(0,255,136,0.3); border-radius:6px; padding:10px 12px; color:#00ff88; font-family:'Courier New',monospace; font-size:1em; outline:none; }
.bonus-input::placeholder { color:rgba(0,255,136,0.4); }
.bonus-submit { background:linear-gradient(135deg,#00c853,#00e676); color:#000; border:none; padding:10px 18px; border-radius:6px; cursor:pointer; font-weight:800; font-size:0.9em; font-family:'Courier New',monospace; }
.bonus-error { color:#ff6b6b; font-size:0.8em; margin-top:8px; display:none; }
.bonus-hint { font-size:0.75em; color:rgba(255,255,255,0.35); margin-top:10px; }
.bonus-success { border-radius:10px; padding:16px; text-align:center; display:none; }
.bonus-success.bonus-type { background:rgba(0,255,136,0.15); border:2px solid rgba(0,255,136,0.4); }
.bonus-success.unlimited-type { background:rgba(255,215,0,0.15); border:2px solid rgba(255,215,0,0.4); }
.replay-btn { display:inline-block; margin:10px auto; padding:12px 30px; background:rgba(102,126,234,0.1); border:2px solid rgba(102,126,234,0.3); border-radius:10px; color:#667eea; text-decoration:none; font-weight:700; font-size:0.95em; cursor:pointer; transition:all 0.2s; }
.replay-btn:hover { background:rgba(102,126,234,0.2); }
.replay-btn .hint { font-size:0.8em; color:#999; font-weight:normal; }
.unlimited-banner { background:linear-gradient(135deg,#FFD700,#FFA500); border-radius:10px; padding:14px 20px; margin:15px 0; text-align:center; font-family:'Arial Black',sans-serif; font-size:1em; color:#000; letter-spacing:2px; box-shadow:0 0 20px rgba(255,215,0,0.5); display:none; }
@media (max-width:768px) {
.container { padding:15px; }
.subtitle { font-size:2.5em; letter-spacing:3px; text-shadow:2px 2px 0px #fb5607,4px 4px 0px #ffbe0b,6px 6px 0px #8338ec,8px 8px 0px #3a86ff; }
.grid { grid-template-columns:80px repeat(3,1fr); grid-template-rows:60px repeat(3,100px); gap:6px; }
.header { font-size:.65em; padding:6px; }
.next-quiz-btn { font-size:1.1em; padding:15px 25px; }
.leaderboard-scores-wrap { margin-top:100px; }
}

/* DESKTOP NAV COMPACT */
@media (min-width: 600px) {
  #quizGridNav { grid-template-columns: repeat(5, 55px) !important; gap: 6px !important; justify-content: center !important; }
  #quizGridNav a { width: 55px !important; height: 40px !important; font-size: 15px !important; border-radius: 8px !important; line-height: 40px !important; }
  .group-tabs { gap: 4px !important; }
  .group-tab { padding: 5px 14px !important; font-size: 0.8em !important; }
}

.secret-code-btn { display:none; margin:8px auto 0; padding:6px 16px; background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; border-radius:20px; font-size:0.8em; font-weight:bold; cursor:pointer; text-align:center; animation:pulseGlow 2s infinite; }
.secret-code-btn:hover { transform:scale(1.05); }
@keyframes pulseGlow { 0%,100%{box-shadow:0 0 5px rgba(102,126,234,0.4)} 50%{box-shadow:0 0 15px rgba(102,126,234,0.8)} }


/* DESKTOP NAV COMPACT */
@media (min-width: 600px) {
  #quizGridNav { grid-template-columns: repeat(5, 55px) !important; gap: 6px !important; justify-content: center !important; }
  #quizGridNav a { width: 55px !important; height: 40px !important; font-size: 15px !important; border-radius: 8px !important; line-height: 40px !important; }
  .group-tabs { gap: 4px !important; }
  .group-tab { padding: 5px 14px !important; font-size: 0.8em !important; }
}
/* UNLOCK PANEL */
.unlock-panel { display:none; background:linear-gradient(135deg, #f8f0ff, #f0f4ff); border:2px solid #764ba2; border-radius:12px; padding:18px 20px; margin-top:10px; text-align:center; }
.unlock-panel.show { display:block; }
.unlock-panel h3 { margin:0 0 12px; font-size:1em; color:#764ba2; }
.code-row { display:flex; align-items:center; justify-content:center; gap:8px; margin-bottom:14px; flex-wrap:wrap; }
.code-row label { font-size:0.85em; font-weight:bold; color:#555; white-space:nowrap; }
.code-input { padding:10px 14px; border:2px solid #ccc; border-radius:8px; font-size:1em; text-transform:uppercase; letter-spacing:2px; width:160px; text-align:center; outline:none; transition:border 0.2s; }
.code-input:focus { border-color:#764ba2; }
.code-input::placeholder { color:#ccc; letter-spacing:1px; text-transform:none; }
.code-submit { padding:10px 18px; background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; border-radius:8px; font-size:0.9em; font-weight:bold; cursor:pointer; transition:transform 0.15s; }
.code-submit:hover { transform:scale(1.05); }
.code-hint { font-size:0.72em; color:#bbb; margin-top:6px; }
.unlock-divider { display:flex; align-items:center; gap:14px; margin:18px 0; color:#764ba2; font-size:1.1em; font-weight:bold; text-transform:uppercase; letter-spacing:2px; }
.unlock-divider::before,.unlock-divider::after { content:''; flex:1; height:2px; background:linear-gradient(to right, transparent, #764ba2, transparent); }
.email-unlock-btn { display:inline-block; padding:10px 24px; background:linear-gradient(135deg,#28a745,#20c997); color:white; border:none; border-radius:25px; font-size:0.9em; font-weight:bold; cursor:pointer; transition:transform 0.15s,box-shadow 0.15s; box-shadow:0 3px 12px rgba(40,167,69,0.3); }
.email-unlock-btn:hover { transform:scale(1.03); box-shadow:0 5px 20px rgba(40,167,69,0.5); }
.email-expand { display:none; margin-top:12px; }
.email-expand.show { display:block; }
.email-expand input { padding:10px 14px; border:2px solid #28a745; border-radius:8px; font-size:1em; width:220px; text-align:center; outline:none; }
.email-expand input:focus { border-color:#20c997; }
.email-expand input::placeholder { color:#bbb; }
.email-expand-submit { margin-top:8px; padding:10px 24px; background:linear-gradient(135deg,#28a745,#20c997); color:white; border:none; border-radius:8px; font-size:0.9em; font-weight:bold; cursor:pointer; }
.email-note { font-size:0.72em; color:#aaa; margin-top:8px; }
.unlock-success-msg { display:none; text-align:center; padding:12px; margin-top:10px; border-radius:10px; background:#f0fff4; border:2px solid #28a745; color:#28a745; }
.unlock-success-msg.show { display:block; }
.unlock-success-msg .big { font-size:1.5em; }
/* SECRET LIFELINE BUTTON */
.secret-code-btn { display:none; margin:8px auto 0; padding:6px 16px; background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; border-radius:20px; font-size:0.8em; font-weight:bold; cursor:pointer; text-align:center; animation:pulseGlow 2s infinite; }
.secret-code-btn:hover { transform:scale(1.05); }
@keyframes pulseGlow { 0%,100%{box-shadow:0 0 5px rgba(102,126,234,0.4)} 50%{box-shadow:0 0 15px rgba(102,126,234,0.8)} }

</style>
</head>
<body>
<div class="yn-toast" id="ynToast">It's Yes or No â€” no lifeline needed! &#127928;</div>
<div class="input-modal-overlay" id="inputOverlay"></div>
<div class="input-modal" id="inputModal">
<h3 id="modalTitle">Enter Answer</h3>
<div class="text-section" id="textSection">
<input type="text" id="modalInput" placeholder="Type your answer..." />
<div class="input-modal-buttons">
<button onclick="saveModalAnswer()">Save</button>
<button onclick="closeModal()" style="background:#6c757d;">Cancel</button>
</div>
<button class="mc-toggle-btn" id="mcToggleBtn" onclick="showMultipleChoice()">&#127919; Multiple Choice (<span id="mcRemaining">3</span> left)</button>
</div>
<div class="mc-section" id="mcSection">
<div id="mcOptions"></div>
<button onclick="showTextEntry()" style="width:100%;margin-top:12px;background:#6c757d;padding:10px;font-size:0.9em;border:none;border-radius:8px;color:white;cursor:pointer;">&#9999;&#65039; Type My Own Answer</button>
</div>
</div>
<div class="stats-modal" id="statsModal" onclick="if(event.target===this) toggleStats()">
<div class="stats-box">
<h2>&#9733; MY STATS &#9733;</h2>
<div class="stats-sub">PLAYER PROFILE</div>
<div class="stat-row"><span class="stat-label">QUIZZES TODAY</span><span class="stat-value" id="statToday">0</span></div>
<div class="stat-row"><span class="stat-label">TOTAL PLAYED</span><span class="stat-value" id="statTotal">0</span></div>
<div class="stat-row"><span class="stat-label">CUMULATIVE SCORE</span><span class="stat-value" id="statCumulative">0%</span></div>
<div class="stat-row"><span class="stat-label">BEST QUIZ SCORE</span><span class="stat-value" id="statBest">0/9</span></div>
<div class="stat-row"><span class="stat-label">&#128293; DAY STREAK</span><span class="stat-value" id="statStreak">0</span></div>
<button class="stats-close" onclick="toggleStats()">CLOSE</button>
</div>
</div>
<div class="limit-modal" id="limitModal">
<div class="limit-box">
<h2>&#9889; GAME OVER &#9889;</h2>
<p>You\'ve maxed out your quizzes for today!<br><br>&#127928; Come back tomorrow for more 80s glory! &#127928;</p>
<button onclick="document.getElementById('limitModal').classList.remove('show')">OK, SEE YOU TOMORROW!</button>
</div>
</div>
<div class="container">
<img src="https://www.dropbox.com/scl/fi/xe71bdsordlklx2o1wz22/new-header.png?rlkey=ti8auttvj17cao8ipecef0vu2&st=s3gjdvos&raw=1" alt="80s Grid Header" class="logo-img">
<div class="tagline-sub">Big Hair. Bigger Hits. Better Quizzes.</div>
<div class="how-to-play">
<h2>How to Play</h2>
<p>Match the artist (column) with the category (row). Click any box to type your answer. Multiple answers may work â€” get creative!</p>
</div>
<div class="group-tabs" id="groupTabs"></div>
<div class="quiz-grid-nav" id="quizGridNav"></div>
<div class="nav-legend2">&#129001; Easy &nbsp;|&nbsp; &#128992; Medium &nbsp;|&nbsp; &#128308; Hard &nbsp;|&nbsp; &#9745; Completed</div>
<div class="nav-status-bar" id="navStatusBar"></div>
<div class="unlock-panel" id="unlockPanel"><h3>ðŸ”“ Want to keep playing?</h3><div class="code-row"><label>Have a secret code?</label><input type="text" class="code-input" id="unlockCodeInput" placeholder="Enter code"><button class="code-submit" onclick="submitUnlockCode()">Submit</button></div><div class="code-hint">Hint: Codes drop on our social media & the Arrive Alive Podcast</div><div class="unlock-divider">OR</div><button class="email-unlock-btn" onclick="toggleUnlockEmail()">ðŸ“§ Enter your email for a free bonus play!</button><div class="email-expand" id="unlockEmailExpand"><div style="margin-top:8px;"><input type="email" id="unlockEmailInput" placeholder="your@email.com"></div><button class="email-expand-submit" onclick="submitUnlockEmail()">Unlock Bonus Quiz ðŸŽ¸</button><div class="email-note">We'll send you 80s trivia tips & new quiz alerts. Unsubscribe anytime.</div></div><div class="unlock-success-msg" id="unlockSuccess"><span class="big" id="unlockSuccessEmoji">ðŸŽ‰</span><br><strong id="unlockSuccessText">Bonus quiz unlocked!</strong></div></div>
<div class="nav-replay-note">&#10003; Completed quizzes can be replayed anytime &mdash; they won&rsquo;t use a play.</div>
<div class="difficulty-badge" style="--badge-color:#28a745; --badge-glow:rgba(40,167,69,0.5);">
<div class="badge-stars">&#9733;&#9733;&#9734;&#9734;&#9734;</div>
<div class="badge-left">
<div class="badge-label">Difficulty: EASY</div>
<div class="badge-score">Difficulty Score: 3/10</div>
<div class="badge-desc">Classic arena rock â€” most 80s fans will know these well</div>
</div>
</div>
<div class="subtitle">Quiz 24</div>
<div style="text-align:center; margin-top:-15px; margin-bottom:25px; font-size:1.3em; color:#667eea; font-family:Georgia, serif; font-style:italic; font-weight:bold; letter-spacing:1px;">Kings of Arena Rock</div>
<div style="text-align:center; margin-bottom:15px;">
<div style="margin-bottom:8px;">
<span id="playsCounter" style="color:#667eea; font-weight:bold; font-size:.9em;">&#127918; Loading plays...</span>
</div>
<div>
<a href="#" onclick="showLeaderboard(); return false;" style="color:#667eea; text-decoration:none; font-weight:bold; font-size:.9em;">Music Edition</a>
<span style="margin:0 8px; color:#ccc;">|</span>
<a href="#" onclick="toggleStats(); return false;" style="color:#667eea; text-decoration:none; font-weight:bold; font-size:.9em;">&#128202; My Stats</a>
</div>
</div>
<div class="lifeline-bar" id="lifelineBar" style="">
<span class="lifeline-label">&#127919; Lifelines</span>
<div class="lifeline-pips">
<div class="lifeline-pip" id="pip1">&#127919;</div>
<div class="lifeline-pip" id="pip2">&#127919;</div>
<div class="lifeline-pip" id="pip3">&#127919;</div>
</div>
<span class="lifeline-count" id="lifelineCount">3 remaining</span>
</div>
<button class="secret-code-btn" id="secretCodeBtn" onclick="promptSecretCode()">ðŸ”“ Enter Secret Code for Bonus Lifeline</button>
<div class="no-lifeline-badge" id="noLifelineBadge" style="">&#127942; No Lifelines Used â€” Pure 80s Knowledge!</div>
<div class="grid">

<div class="header" style="grid-row:1; grid-column:1; background:transparent;"></div>
<div class="header col-header" style="grid-column:2;">Journey</div><div class="header col-header" style="grid-column:3;">Foreigner</div><div class="header col-header" style="grid-column:4;">REO<br>Speedwagon</div>
<div class="header row-header" style="grid-row:2;">Signature Hit</div><div class="header row-header" style="grid-row:3;">City They<br>Formed In</div><div class="header row-header" style="grid-row:4;">Name a Song with<br>LOVE in the Title</div>
<div class="cell" data-row="0" data-col="0"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="0" data-col="1"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="0" data-col="2"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="1" data-col="0"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="1" data-col="1"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="1" data-col="2"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="2" data-col="0"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="2" data-col="1"><input type="text" placeholder="Type here" readonly /></div><div class="cell" data-row="2" data-col="2"><input type="text" placeholder="Type here" readonly /></div>

</div>
<div style="background:#e3f2fd; border:1px solid #2196f3; padding:12px; border-radius:8px; margin-bottom:20px; text-align:center; font-size:.9em;">
<strong>&#128679; Beta Version</strong> â€” This game is still in testing. Please forgive any mistakes or inconsistencies. Your feedback is appreciated!
</div>
<div class="footnote-box">
<strong>&#128221; Notes</strong>
<ul><li>Journey's signature song was famously featured in the final scene of a beloved TV drama decades after its release â€” introducing it to an entirely new generation and making it one of the most streamed classic rock songs of all time.</li><li>Foreigner was founded by a mix of British and American musicians, giving them a transatlantic sound. Their biggest power ballad was recorded with a full gospel choir â€” a production choice that gave it an enormous emotional punch.</li><li>REO Speedwagon had been together for over a decade as a hard-touring road band before they finally broke through to mainstream pop success in the early 80s with a softer, more polished sound.</li><li>Surprisingly, not all of these bands' most famous songs ever reached #1 on the Billboard Hot 100 â€” one of the most iconic rock songs in history peaked at just #9.</li></ul>
</div>
<div class="button-container">
<button onclick="checkAnswers()">Check Answers</button>
<button onclick="resetGrid()">Reset Grid</button>
<button onclick="shareScore()" style="background:#FF1493;">&#128228; Share with a Friend</button>
</div>
<div id="results" style="display:none;">
<div id="score" style="font-size:1.3em; font-weight:bold; color:#333; margin-bottom:15px;"></div>
<div class="post-quiz-progress" id="postQuizProgress">
<div class="progress-pips" id="postProgressPips"></div>
<div class="progress-text" id="postProgressText"></div>
</div>
<div class="unlimited-banner" id="postUnlimitedBanner">&#128377;&#65039; UNLIMITED MODE ACTIVATED &#128377;&#65039;</div>
<button onclick="shareScore()" style="background:#FF1493; color:white; border:none; padding:12px 30px; border-radius:10px; cursor:pointer; font-size:1em; font-weight:bold; width:100%; margin-bottom:10px; box-shadow:0 4px 15px rgba(255,20,147,0.3);">&#128228; Share the 80s Grid with a Friend</button>
<div style="margin-bottom:10px;">
<a href="quiz24.html" class="replay-btn">&#128260; Play Quiz 24 Again <span class="hint">(doesn't count toward daily limit)</span></a>
</div>
<div id="postNextQuiz">
<a href="quiz25.html" class="next-quiz-btn" id="postNextQuizBtn">&#127928; PLAY QUIZ 25 &#8594; &#127928;</a>
</div>
<div id="surveyQuestion" class="survey-question" style="background:linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); padding:25px 18px; display:none;">
<h3 id="surveyTitle" style="font-family:'Arial Black',sans-serif; letter-spacing:3px; font-size:1.1em; text-shadow:0 0 20px rgba(255,20,147,0.5); margin-bottom:14px;"></h3>
<div class="survey-options" id="surveyOptions" style="gap:8px;"></div>
</div>
<div class="post-quiz-wrap" id="postWrapBox" style="display:none;">
<div style="font-size:1.5em; margin-bottom:6px;">&#127926;</div>
<div class="wrap-title">That's a wrap for today!</div>
<div class="wrap-text">Come back tomorrow to unlock <strong style="color:#28a745;">2 more new quizzes</strong>. In the meantime, replay any quiz you've already completed â€” replays are always free!</div>
<div class="bonus-code-box" id="bonusCodeBox">
<div class="bonus-prompt">&gt; WANT A <span class="gold">BONUS QUIZ</span>? _</div>
<div class="bonus-desc">Enter a <strong>secret code</strong> <em>or</em> <strong>your email</strong> to unlock one more quiz today</div>
<div class="bonus-row">
<input type="text" class="bonus-input" id="bonusInput" placeholder="Code or email..." onkeydown="if(event.key==='Enter')submitBonusCode()">
<button class="bonus-submit" id="bonusSubmitBtn" onclick="submitBonusCode()">ENTER</button>
</div>
<div class="bonus-error" id="bonusError">Hmm, that doesn't look like a valid code or email. Try again!</div>
<div class="bonus-hint">&#128274; We'll never spam you. Email just unlocks one bonus quiz.</div>
</div>
<div class="bonus-success" id="bonusSuccess">
<div style="font-size:1.3em; margin-bottom:4px;">&#128377;&#65039;</div>
<div id="bonusSuccessTitle" style="font-size:1.1em; font-weight:700; margin-bottom:4px;"></div>
<div id="bonusSuccessText" style="font-size:0.9em; color:#555;"></div>
</div>
</div>
</div>
<div id="highScoreEntry" class="high-score-entry" style="display:none;">
<h2>&#9733; HIGH SCORE &#9733;</h2>
<p style="color:#00ff00; text-align:center; font-size:1.2em; margin-bottom:20px;">ENTER YOUR INITIALS</p>
<div class="initials-input">
<input type="text" maxlength="1" id="initial1" />
<input type="text" maxlength="1" id="initial2" />
<input type="text" maxlength="1" id="initial3" />
</div>
<div style="text-align:center; margin-top:20px;"><button class="arcade-button" onclick="saveHighScore()">SAVE</button></div>
</div>
<div id="leaderboard" class="leaderboard" style="display:none;">
<div class="leaderboard-scores-wrap">
<div class="leaderboard-subtitle"></div>
<div id="leaderboardList"></div>
</div>
</div>
</div>
<script>
const QUIZ_NUM = 24;
const PLAYS_KEY = '80sGridPlaysQuiz24';
const SESSION_KEY = 'hasPlayedQuiz24';
const QUIZ_KEY = 'quiz24Score';
const DAILY_LIMIT = 2;
const FORMSPREE_URL = 'https://formspree.io/f/xqedyjjd';
const SECRET_CODES = { LEN: 'bonus', MAGIC: 'unlimited' };
const FAKE_SCORES = [
{initials:'ACE',pct:100,quizzes:9,date:'2/1/26'},{initials:'MAX',pct:96,quizzes:9,date:'2/3/26'},
{initials:'ROX',pct:93,quizzes:9,date:'2/5/26'},{initials:'JAX',pct:89,quizzes:9,date:'2/8/26'},
{initials:'ZEN',pct:89,quizzes:5,date:'2/10/26'},{initials:'VIX',pct:85,quizzes:9,date:'2/12/26'},
{initials:'RAD',pct:85,quizzes:4,date:'2/14/26'},{initials:'SKY',pct:82,quizzes:9,date:'2/15/26'},
{initials:'NEO',pct:81,quizzes:5,date:'2/16/26'},{initials:'LUX',pct:80,quizzes:9,date:'2/16/26'}
];
const SHARE_TEXT = "&#127928; Test your 80s music knowledge! Play Len's 80sGrid.com Music Edition: https://80sgrid.com/";
const PLAYS_START = 100;
const yesNoKeys = [];
const answers = {'0-0': ["don't stop believin", "don't stop believin'", "dont stop believin"],
'0-1': ["i want to know what love is"],
'0-2': ["can't fight this feeling", "cant fight this feeling"],
'1-0': ["san francisco", "sf"],
'1-1': ["new york", "new york city", "nyc"],
'1-2': ["champaign", "champaign illinois", "champaign il"],
'2-0': ["send her my love", "lovin' touchin' squeezin'", "lovin touchin squeezin"],
'2-1': ["i want to know what love is", "love on the telephone"],
'2-2': ["keep on loving you", "keep on lovin you", "cant fight this feeling"]};
const mcOptions = {'0-0': ["Don't Stop Believin'", "Open Arms", "Any Way You Want It"],
'0-1': ["I Want to Know What Love Is", "Cold as Ice", "Urgent"],
'0-2': ["Can't Fight This Feeling", "Keep on Loving You", "Take It on the Run"],
'1-0': ["San Francisco", "Los Angeles", "Chicago"],
'1-1': ["New York", "London", "Boston"],
'1-2': ["Champaign, IL", "Chicago, IL", "St. Louis, MO"],
'2-0': ["Send Her My Love", "Lovin' Touchin' Squeezin'", "Open Arms"],
'2-1': ["I Want to Know What Love Is", "Love on the Telephone", "Head Games"],
'2-2': ["Keep on Loving You", "Take It on the Run", "Roll with the Changes"]};
let currentCell = null;
let lifelinesRemaining = 3;
let radBonusUsed = false;

function getTodayKey() { return 'quizzesPlayed_' + new Date().toISOString().slice(0,10); }
function getQuizzesPlayedToday() { return parseInt(localStorage.getItem(getTodayKey()) || '0'); }
function incrementQuizzesPlayedToday() { const k=getTodayKey(); const n=getQuizzesPlayedToday()+1; localStorage.setItem(k,n); return n; }
function getBonusKey() { return 'bonusUnlock_' + new Date().toISOString().slice(0,10); }
function getUnlockType() { return localStorage.getItem(getBonusKey()) || null; }
function setUnlockType(type) { localStorage.setItem(getBonusKey(), type); }
function getEffectiveDailyLimit() { const unlock=getUnlockType(); if(unlock==='unlimited') return 999; if(unlock==='bonus') return DAILY_LIMIT+1; return DAILY_LIMIT; }
function hasNewPlaysLeft() { return getUnlockType()==='unlimited' || getQuizzesPlayedToday() < getEffectiveDailyLimit(); }

function loadStats() {
  const today=getQuizzesPlayedToday(); const limit=getEffectiveDailyLimit();
  const total=parseInt(localStorage.getItem('totalQuizzesPlayed')||'0');
  let cum=0; for(let i=1;i<=31;i++) cum+=parseInt(localStorage.getItem('quiz'+i+'Score')||0);
  const best=parseInt(localStorage.getItem('bestQuizScore')||'0');
  const streak=parseInt(localStorage.getItem('playStreak')||'0');
  document.getElementById('statToday').textContent=today+' / '+(limit>900?'âˆž':limit);
  document.getElementById('statTotal').textContent=total;
  document.getElementById('statCumulative').textContent=cum+'/279';
  document.getElementById('statBest').textContent=best+'/9';
  document.getElementById('statStreak').textContent=streak+' days';
}
function toggleStats() { loadStats(); document.getElementById('statsModal').classList.toggle('show'); }
function updateStreak() {
  const today=new Date().toISOString().slice(0,10);
  const lastPlayed=localStorage.getItem('lastPlayedDate');
  let streak=parseInt(localStorage.getItem('playStreak')||'0');
  if(lastPlayed===today) return;
  const yesterday=new Date(Date.now()-86400000).toISOString().slice(0,10);
  streak=(lastPlayed===yesterday)?streak+1:1;
  localStorage.setItem('playStreak',streak); localStorage.setItem('lastPlayedDate',today);
}
function updatePostQuizUI() {
  const played=getQuizzesPlayedToday(); const unlock=getUnlockType(); const limit=getEffectiveDailyLimit();
  const isUnlimited=unlock==='unlimited'; const playsLeft=isUnlimited?999:limit-played;
  const progressEl=document.getElementById('postQuizProgress'); const unlimitedEl=document.getElementById('postUnlimitedBanner');
  if(isUnlimited) { progressEl.style.display='none'; unlimitedEl.style.display='block'; }
  else {
    progressEl.style.display='block'; unlimitedEl.style.display='none';
    let pipsHTML=''; for(let i=0;i<limit;i++) pipsHTML+='<div class="progress-pip '+(i<played?'filled':'empty')+'"></div>';
    document.getElementById('postProgressPips').innerHTML=pipsHTML;
    let text; if(playsLeft>0) { text='You\'ve played <strong style="color:#8B00FF;">'+played+'</strong> of your <strong style="color:#FF1493;">'+limit+'</strong> new quizzes today.'; text+=playsLeft===1?' You\'ve got <strong style="color:#28a745;">1 new quiz</strong> left!':' You\'ve got <strong style="color:#28a745;">'+playsLeft+' new quizzes</strong> left!'; }
    else { text='You\'ve played all <strong style="color:#FF1493;">'+limit+'</strong> new quizzes for today! &#127881;'; }
    document.getElementById('postProgressText').innerHTML=text;
  }
  const nextQuizEl=document.getElementById('postNextQuiz'); const wrapEl=document.getElementById('postWrapBox');
  if(playsLeft>0||isUnlimited) { nextQuizEl.style.display='block'; wrapEl.style.display='none'; }
  else { nextQuizEl.style.display='none'; wrapEl.style.display='block'; if(unlock) { document.getElementById('bonusCodeBox').style.display='none'; showBonusSuccess(unlock); } }
}
function isEmail(str) { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(str.trim()); }
async function submitEmailToFormspree(email) {
  try { await fetch(FORMSPREE_URL, { method:'POST', headers:{'Content-Type':'application/json','Accept':'application/json'}, body:JSON.stringify({email:email.trim(),quiz:'Quiz '+QUIZ_NUM,date:new Date().toISOString()}), }); } catch(e) {}
}
async function submitBonusCode() {
  const input=document.getElementById('bonusInput').value.trim(); const upper=input.toUpperCase();
  const errorEl=document.getElementById('bonusError'); const submitBtn=document.getElementById('bonusSubmitBtn');
  if(SECRET_CODES[upper]) { setUnlockType(SECRET_CODES[upper]); errorEl.style.display='none'; document.getElementById('bonusCodeBox').style.display='none'; showBonusSuccess(SECRET_CODES[upper]); updatePostQuizUI(); }
  else if(isEmail(input)) { submitBtn.textContent='...'; submitBtn.style.opacity='0.6'; await submitEmailToFormspree(input); submitBtn.textContent='ENTER'; submitBtn.style.opacity='1'; setUnlockType('bonus'); errorEl.style.display='none'; document.getElementById('bonusCodeBox').style.display='none'; showBonusSuccess('bonus'); updatePostQuizUI(); }
  else { errorEl.style.display='block'; }
}
function showBonusSuccess(type) {
  const el=document.getElementById('bonusSuccess'); const titleEl=document.getElementById('bonusSuccessTitle'); const textEl=document.getElementById('bonusSuccessText');
  el.style.display='block';
  if(type==='unlimited') { el.className='bonus-success unlimited-type'; titleEl.style.color='#FFA500'; titleEl.textContent='UNLIMITED MODE ACTIVATED!'; textEl.textContent='All quizzes unlocked. Play as many as you want!'; }
  else { el.className='bonus-success bonus-type'; titleEl.style.color='#28a745'; titleEl.textContent='BONUS QUIZ UNLOCKED!'; textEl.textContent='You unlocked 1 bonus quiz today!'; }
}
function initializeCells() {
  const colH = ["Journey", "Foreigner", "REO Speedwagon"];
  const rowH = ["Signature Hit", "City They Formed In", "Name a Song with LOVE in the Title"];
  document.querySelectorAll('.cell').forEach(cell=>{
    const key=cell.dataset.row+'-'+cell.dataset.col;
    const isYN=yesNoKeys.includes(key);
    if(isYN) cell.querySelector('input').placeholder='Yes or No?';
    cell.addEventListener('click',()=>openModal(cell));
  });
}
function openModal(cell) {
  currentCell=cell;
  const colH=["Journey", "Foreigner", "REO Speedwagon"];
  const rowH=["Signature Hit", "City They Formed In", "Name a Song with LOVE in the Title"];
  const key=cell.dataset.row+'-'+cell.dataset.col;
  const isYN=yesNoKeys.includes(key);
  document.getElementById('modalTitle').textContent=colH[parseInt(cell.dataset.col)]+' â€” '+rowH[parseInt(cell.dataset.row)]+(isYN?' (Yes or No)':'');
  document.getElementById('modalInput').value=cell.querySelector('input').value;
  showTextEntry();
  const mcBtn=document.getElementById('mcToggleBtn');
  if(mcBtn) mcBtn.style.display=(Object.keys(mcOptions).length===0||isYN)?'none':'block';
  document.getElementById('inputModal').classList.add('active');
  document.getElementById('inputOverlay').classList.add('active');
  setTimeout(()=>document.getElementById('modalInput').focus(),100);
}
function closeModal() { document.getElementById('inputModal').classList.remove('active'); document.getElementById('inputOverlay').classList.remove('active'); currentCell=null; }
function saveModalAnswer() {
  if(currentCell) {
    const modalValue=document.getElementById('modalInput').value;
    if(modalValue.toUpperCase()==='RAD'&&!radBonusUsed) { radBonusUsed=true; lifelinesRemaining++; updateLifelineUI(); alert("Len's Bonus lifeline unlocked! &#128703;"); document.getElementById('modalInput').value=''; document.getElementById('modalInput').focus(); return; }
    currentCell.querySelector('input').value=modalValue; closeModal();
  }
}
document.addEventListener('keypress',(e)=>{ if(e.key==='Enter'&&document.getElementById('inputModal').classList.contains('active')) saveModalAnswer(); });
document.getElementById('inputOverlay').addEventListener('click',closeModal);
function updateLifelineUI() {
  for(let i=1;i<=3;i++) { const pip=document.getElementById('pip'+i); if(i<=lifelinesRemaining){pip.classList.remove('used');pip.textContent='&#127919;';}else{pip.classList.add('used');pip.textContent='';} }
  const countEl=document.getElementById('lifelineCount'); const btnEl=document.getElementById('mcToggleBtn'); const remainEl=document.getElementById('mcRemaining');
  if(remainEl) remainEl.textContent=lifelinesRemaining;
  if(lifelinesRemaining===0) { countEl.textContent='None left!'; countEl.classList.add('empty');
      var scb=document.getElementById('secretCodeBtn');if(scb)scb.style.display='block'; if(btnEl){btnEl.disabled=true;} }
  else { countEl.textContent=lifelinesRemaining+' remaining'; countEl.classList.remove('empty');
      var scb=document.getElementById('secretCodeBtn');if(scb)scb.style.display='none'; if(btnEl){btnEl.disabled=false;} }
}
function showMultipleChoice() {
  if(lifelinesRemaining<=0) return;
  const key=currentCell.dataset.row+'-'+currentCell.dataset.col;
  if(yesNoKeys.includes(key)) { const toast=document.getElementById('ynToast'); toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),2000); return; }
  if(!mcOptions[key]||mcOptions[key].length===0) return;
  const opts=[...mcOptions[key]]; for(let i=opts.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[opts[i],opts[j]]=[opts[j],opts[i]];}
  const container=document.getElementById('mcOptions'); container.innerHTML='';
  opts.forEach(opt=>{ const btn=document.createElement('button'); btn.className='mc-option'; btn.textContent=opt; btn.onclick=()=>selectMCOption(opt); container.appendChild(btn); });
  document.getElementById('textSection').classList.add('hidden'); document.getElementById('mcSection').classList.add('visible');
}
function showTextEntry() { document.getElementById('textSection').classList.remove('hidden'); document.getElementById('mcSection').classList.remove('visible'); setTimeout(()=>document.getElementById('modalInput').focus(),60); }
function selectMCOption(value) { if(currentCell) { currentCell.querySelector('input').value=value; lifelinesRemaining=Math.max(0,lifelinesRemaining-1); updateLifelineUI(); closeModal(); } }
function promptSecretCode() {
  var code = prompt("Enter secret code for a bonus lifeline:");
  if (code && code.toUpperCase() === "RAD") {
    lifelinesRemaining++;
    updateLifelineUI();
    alert("ðŸ›¡ï¸ Bonus lifeline unlocked!");
  } else if (code) {
    alert("Sorry, that code is not valid. Keep looking!");
  }
}



function normalizeString(str) { return str.toLowerCase().replace(/[â€˜â€™']/g,'').replace(/[^a-z0-9\s]/g,'').replace(/\s+/g,' ').trim(); }
function checkAnswers() {
  let _isFirstPlayToday=false;
  const previousScore=parseInt(localStorage.getItem(QUIZ_KEY)||'0'); const isThisAReplay=previousScore>0;
  if(!isThisAReplay&&!hasNewPlaysLeft()) { document.getElementById('limitModal').classList.add('show'); return; }
  const cells=document.querySelectorAll('.cell'); let correct=0,total=0;
  cells.forEach(cell=>{
    const input=cell.querySelector('input'); const userAnswer=normalizeString(input.value);
    const key=cell.dataset.row+'-'+cell.dataset.col;
    if(userAnswer){ total++;
      const valid=answers[key].map(a=>normalizeString(a));
      if(valid.some(a=>userAnswer===a||userAnswer.includes(a)||a.includes(userAnswer))){cell.classList.add('correct');cell.classList.remove('incorrect');correct++;}
      else{cell.classList.add('incorrect');cell.classList.remove('correct');}
    }
  });
  if(total===0){alert('Fill in some answers first!');return;}
  if(!sessionStorage.getItem(SESSION_KEY)){
    let plays=(parseInt(localStorage.getItem(PLAYS_KEY))||PLAYS_START); plays++; localStorage.setItem(PLAYS_KEY,plays); updatePlaysCounter(); sessionStorage.setItem(SESSION_KEY,'true');
    if(!isThisAReplay){ incrementQuizzesPlayedToday(); _isFirstPlayToday=true; }
    const tot=parseInt(localStorage.getItem('totalQuizzesPlayed')||'0')+1; localStorage.setItem('totalQuizzesPlayed',tot);
    updateStreak();
    const best=parseInt(localStorage.getItem('bestQuizScore')||'0'); if(correct>best) localStorage.setItem('bestQuizScore',correct);
  }
  const oldScore=parseInt(localStorage.getItem(QUIZ_KEY)||'0'); if(correct>oldScore) localStorage.setItem(QUIZ_KEY,correct);
  document.getElementById('score').textContent='You got '+correct+' out of '+total+' correct!';
  document.getElementById('results').style.display='block';
  updatePostQuizUI();
  if(correct>=8&&total===9) setTimeout(()=>{document.getElementById('highScoreEntry').style.display='block';document.getElementById('initial1').focus();},1000);
  displayLeaderboard();
  maybeShowSurvey(_isFirstPlayToday);
}
function updatePlaysCounter() { let plays=(parseInt(localStorage.getItem(PLAYS_KEY))||PLAYS_START); document.getElementById('playsCounter').textContent='&#127918; '+plays.toLocaleString()+' plays'; }
function showLeaderboard() { displayLeaderboard(); document.getElementById('leaderboard').scrollIntoView({behavior:'smooth'}); }
function shareScore() { if(navigator.share){navigator.share({title:"Len's 80sGrid.com",text:SHARE_TEXT}).catch(()=>{});}else{navigator.clipboard.writeText(SHARE_TEXT).then(()=>{alert('Link copied!');}).catch(()=>{alert(SHARE_TEXT);});} }
function resetGrid() { document.querySelectorAll('.cell input').forEach(i=>{i.value='';i.parentElement.classList.remove('correct','incorrect');});document.getElementById('results').style.display='none';document.getElementById('highScoreEntry').style.display='none'; }
function saveHighScore() {
  const i1=document.getElementById('initial1').value.toUpperCase(); const i2=document.getElementById('initial2').value.toUpperCase(); const i3=document.getElementById('initial3').value.toUpperCase();
  if(!i1||!i2||!i3){alert('Please enter all 3 initials!');return;}
  let totalCorrect=0; let quizzesPlayed=0;
  for(let i=1;i<=31;i++){const s=parseInt(localStorage.getItem('quiz'+i+'Score')||0);totalCorrect+=s;if(s>0)quizzesPlayed++;}
  const possible=quizzesPlayed*9; const pct=possible>0?Math.round((totalCorrect/possible)*100):0;
  if(pct>=80){let scores=JSON.parse(localStorage.getItem('80sGridScoresCombined')||'[]');scores.push({initials:i1+i2+i3,pct:pct,quizzes:quizzesPlayed,date:new Date().toLocaleDateString('en-US',{month:'numeric',day:'numeric',year:'2-digit'})});scores.sort((a,b)=>b.pct-a.pct);scores=scores.slice(0,10);localStorage.setItem('80sGridScoresCombined',JSON.stringify(scores));}
  document.getElementById('highScoreEntry').style.display='none'; displayLeaderboard();
}
function displayLeaderboard() {
  let scores=JSON.parse(localStorage.getItem('80sGridScoresCombined')||'[]');
  if(scores.length<10) scores=[...scores,...FAKE_SCORES].slice(0,10);
  scores.sort((a,b)=>b.pct-a.pct);
  const html=scores.map((s,i)=>'<div class="leaderboard-item"><span class="leaderboard-rank">'+String(i+1).padStart(2,'0')+'.</span><span class="leaderboard-initials">'+s.initials+'</span><span class="leaderboard-score">'+s.pct+'%</span><span class="leaderboard-date">'+s.date+'</span></div>').join('');
  document.getElementById('leaderboardList').innerHTML=html; document.getElementById('leaderboard').style.display='block';
}
document.getElementById('initial1').addEventListener('input',function(){if(this.value)document.getElementById('initial2').focus();});
document.getElementById('initial2').addEventListener('input',function(){if(this.value)document.getElementById('initial3').focus();});
document.getElementById('initial3').addEventListener('keypress',function(e){if(e.key==='Enter')saveHighScore();});
/* ===== PAGINATED NAV ===== */
const ALL_NAV_QUIZZES=[{n:1,f:'index.html',c:'easy'},{n:2,f:'quiz2.html',c:'medium'},{n:3,f:'quiz3.html',c:'medium'},{n:4,f:'quiz4.html',c:'hard'},{n:5,f:'quiz5.html',c:'medium'},{n:6,f:'quiz6.html',c:'medium'},{n:7,f:'quiz7.html',c:'easy'},{n:8,f:'quiz8.html',c:'medium'},{n:9,f:'quiz9.html',c:'easy'},{n:10,f:'quiz10.html',c:'medium'},{n:11,f:'quiz11.html',c:'hard'},{n:12,f:'quiz12.html',c:'medium'},{n:13,f:'quiz13.html',c:'medium'},{n:14,f:'quiz14.html',c:'medium'},{n:15,f:'quiz15.html',c:'hard'},{n:16,f:'quiz16.html',c:'easy'},{n:17,f:'quiz17.html',c:'medium'},{n:18,f:'quiz18.html',c:'hard'},{n:19,f:'quiz19.html',c:'easy'},{n:20,f:'quiz20.html',c:'hard'},{n:21,f:'quiz21.html',c:'medium'},{n:22,f:'quiz22.html',c:'easy'},{n:23,f:'quiz23.html',c:'hard'},{n:24,f:'quiz24.html',c:'easy'},{n:25,f:'quiz25.html',c:'hard'},{n:26,f:'quiz26.html',c:'hard'},{n:27,f:'quiz27.html',c:'medium'},{n:28,f:'quiz28.html',c:'medium'},{n:29,f:'quiz29.html',c:'medium'},{n:30,f:'quiz30.html',c:'hard'},{n:31,f:'quiz31.html',c:'hard'}];
const NAV_GROUPS=[ALL_NAV_QUIZZES.slice(0,10),ALL_NAV_QUIZZES.slice(10,20),ALL_NAV_QUIZZES.slice(20,30),ALL_NAV_QUIZZES.slice(30)];
const GROUP_LABELS=['1 \u2013 10','11 \u2013 20','21 \u2013 30','31 \u2013 40'];
let navActiveGroup=QUIZ_NUM<=10?0:QUIZ_NUM<=20?1:QUIZ_NUM<=30?2:3;
function hasPlayedQuiz(n){const key=n===1?'quiz1Score':'quiz'+n+'Score';return parseInt(localStorage.getItem(key)||'0')>0;}
function showNavGroup(idx){
  navActiveGroup=idx;
  document.querySelectorAll('.group-tab').forEach(function(t,i){t.classList.toggle('active',i===idx);});
  renderNavGrid();
}
function renderNavGrid(){
  var grid=document.getElementById('quizGridNav');if(!grid)return;
  grid.innerHTML='';
  var tabs=document.getElementById('groupTabs');
  if(tabs&&!tabs.hasChildNodes()){
    GROUP_LABELS.forEach(function(label,i){
      var d=document.createElement('div');d.className='group-tab'+(i===navActiveGroup?' active':'');
      d.textContent=label;d.onclick=function(){showNavGroup(i);};tabs.appendChild(d);
    });
  }
  var quizzes=NAV_GROUPS[navActiveGroup]||[];
  quizzes.forEach(function(q){
    var a=document.createElement('a');
    var played=hasPlayedQuiz(q.n);var isCurrent=q.n===QUIZ_NUM;
    a.className=played?'played'+(isCurrent?' current':''):q.c+(isCurrent?' current':'');
    a.textContent=q.n;a.href=q.f;grid.appendChild(a);
  });
  updateNavStatus();
}
function updateNavStatus(){
  var bar=document.getElementById("navStatusBar");if(!bar)return;
  var played=getQuizzesPlayedToday();
  var limit=(typeof getEffectiveDailyLimit==="function")?getEffectiveDailyLimit():DAILY_LIMIT;
  var isUnlimited=(typeof getUnlockType==="function")&&getUnlockType()==="unlimited";
  var panel=document.getElementById("unlockPanel");
  if(isUnlimited){
    bar.innerHTML="\u267e\ufe0f Unlimited mode active!";bar.className="nav-status-bar unlimited";
    if(panel)panel.classList.remove("show");
  } else if(played>=limit){
    bar.innerHTML="\uD83D\uDEAB Daily limit reached \u2014 replay completed quizzes or unlock more below!";bar.className="nav-status-bar limit-reached";
    if(panel)panel.classList.add("show");
  } else {
    bar.innerHTML="\uD83D\uDD79\ufe0f "+(limit-played)+" of "+limit+" plays remaining today";bar.className="nav-status-bar";
    if(panel)panel.classList.remove("show");
  }
}
function initNav(){renderNavGrid();}
/* ===== END NAV ===== */
/* ===== ROTATING SURVEY SYSTEM ===== */
const SURVEY_FORMSPREE='https://formspree.io/f/xeelpozw';
const SURVEYS={
  tribe:{id:'tribe',title:'&#127926; WHAT TYPE OF 80s FAN ARE YOU? &#127926;',options:[
    {value:'New Wave',icon:'&#127929;',label:'NEW WAVE',sub:'Depeche Mode &bull; The Cure &bull; Tears for Fears',color:'#9d4edd',bg:'linear-gradient(135deg,#6a0dad,#9d4edd)',border:'#b388ff',pct:26},
    {value:'Hair Metal',icon:'&#127928;',label:'HAIR METAL',sub:'M&ouml;tley Cr&uuml;e &bull; Def Leppard &bull; Bon Jovi',color:'#dc2626',bg:'linear-gradient(135deg,#b91c1c,#dc2626)',border:'#f87171',pct:15},
    {value:'Pop Royalty',icon:'&#128081;',label:'POP ROYALTY',sub:'Madonna &bull; Michael Jackson &bull; Prince',color:'#FF1493',bg:'linear-gradient(135deg,#FF1493,#ff69b4)',border:'#ffb6c1',pct:28},
    {value:'Goth Dark Wave',icon:'&#128420;',label:'GOTH / DARK WAVE',sub:'Siouxsie &bull; Bauhaus &bull; The Smiths',color:'#888',bg:'linear-gradient(135deg,#1a1a1a,#333333)',border:'#666',pct:14},
    {value:'Heartland Rock',icon:'&#127482;&#127480;',label:'HEARTLAND ROCK',sub:'Springsteen &bull; Petty &bull; Mellencamp',color:'#d97706',bg:'linear-gradient(135deg,#b45309,#d97706)',border:'#fbbf24',pct:17}
  ]},
  prom:{id:'prom',title:'&#127891; DID YOU GO TO YOUR PROM? &#127891;',options:[
    {value:'Yes - married prom date',icon:'&#128141;',label:'YES &mdash; AND I LATER MARRIED MY PROM DATE',sub:'',color:'#FF1493',bg:'linear-gradient(135deg,#FF1493,#ff69b4)',border:'#ffb6c1',pct:8},
    {value:'Yes - blast',icon:'&#128378;',label:'YES &mdash; HAD AN ABSOLUTE BLAST',sub:'',color:'#9d4edd',bg:'linear-gradient(135deg,#6a0dad,#9d4edd)',border:'#b388ff',pct:42},
    {value:'Yes - hated it',icon:'&#128543;',label:'YES &mdash; HATED EVERY SECOND OF IT',sub:'',color:'#dc2626',bg:'linear-gradient(135deg,#b91c1c,#dc2626)',border:'#f87171',pct:19},
    {value:'No - not saying',icon:'&#129296;',label:"NO&hellip; AND THAT'S ALL I'M SAYING ABOUT THAT",sub:'',color:'#555',bg:'linear-gradient(135deg,#333,#555)',border:'#777',pct:31}
  ]},
  mall:{id:'mall',title:'&#128722; WHAT WAS YOUR FAVORITE MALL STORE? &#128722;',options:[
    {value:'Esprit',icon:'&#128084;',label:'ESPRIT',sub:'The colorblock queen of the mall',color:'#d97706',bg:'linear-gradient(135deg,#b45309,#d97706)',border:'#fbbf24',pct:22},
    {value:'The Limited',icon:'&#128717;',label:'THE LIMITED',sub:'Power suits and shoulder pads',color:'#FF1493',bg:'linear-gradient(135deg,#FF1493,#ff69b4)',border:'#ffb6c1',pct:31},
    {value:'Benetton',icon:'&#127757;',label:'BENETTON',sub:'United Colors and bold statements',color:'#28a745',bg:'linear-gradient(135deg,#155724,#28a745)',border:'#c3e6cb',pct:18},
    {value:'Chess King',icon:'&#9820;',label:'CHESS KING',sub:'Where the cool guys shopped',color:'#9d4edd',bg:'linear-gradient(135deg,#6a0dad,#9d4edd)',border:'#b388ff',pct:14},
    {value:'Sam Goody',icon:'&#127925;',label:'SAM GOODY',sub:'Your cassette tape headquarters',color:'#dc2626',bg:'linear-gradient(135deg,#b91c1c,#dc2626)',border:'#f87171',pct:15}
  ]},
  sat:{id:'sat',title:'&#128221; WHAT DID YOU GET ON YOUR SATs? &#128221;',options:[
    {value:'Over 1400',icon:'&#127891;',label:'OVER 1400 &mdash; CRUSHED IT',sub:'',color:'#28a745',bg:'linear-gradient(135deg,#155724,#28a745)',border:'#c3e6cb',pct:18},
    {value:'1000-1399',icon:'&#128218;',label:'1000&ndash;1399 &mdash; SOLID',sub:'',color:'#9d4edd',bg:'linear-gradient(135deg,#6a0dad,#9d4edd)',border:'#b388ff',pct:39},
    {value:'800-999',icon:'&#128517;',label:'800&ndash;999 &mdash; GOT IN ANYWAY',sub:'',color:'#d97706',bg:'linear-gradient(135deg,#b45309,#d97706)',border:'#fbbf24',pct:28},
    {value:'Ask Mr Hand',icon:'&#127940;',label:'ASK MR. HAND&hellip;',sub:'Fast Times reference â€” you know who you are',color:'#dc2626',bg:'linear-gradient(135deg,#b91c1c,#dc2626)',border:'#f87171',pct:15}
  ]},
  coffee:{id:'coffee',title:'&#9749; COFFEE WITH ONE PERSON &mdash; WHO? &#9749;',options:[
    {value:'Prince',icon:'&#127880;',label:'PRINCE',sub:"If he'd even show up",color:'#9d4edd',bg:'linear-gradient(135deg,#6a0dad,#9d4edd)',border:'#b388ff',pct:29},
    {value:'Madonna',icon:'&#128132;',label:'MADONNA',sub:"She'd do all the talking",color:'#FF1493',bg:'linear-gradient(135deg,#FF1493,#ff69b4)',border:'#ffb6c1',pct:24},
    {value:'Bono',icon:'&#127758;',label:'BONO',sub:'Bring earplugs',color:'#d97706',bg:'linear-gradient(135deg,#b45309,#d97706)',border:'#fbbf24',pct:13},
    {value:'Sade',icon:'&#127801;',label:'SAD&Eacute;',sub:'The most mysterious conversation ever',color:'#28a745',bg:'linear-gradient(135deg,#155724,#28a745)',border:'#c3e6cb',pct:34}
  ]}
};
const SURVEY_ORDER=['tribe','prom','mall','sat','coffee'];
const SURVEY_DONE_KEY='80sGrid_surveysCompleted';
const SURVEY_SHOWN_TODAY_KEY='80sGrid_surveyShownDate';
function getSurveysCompleted(){try{return JSON.parse(localStorage.getItem(SURVEY_DONE_KEY)||'[]');}catch(e){return[];}}
function markSurveyCompleted(id){const done=getSurveysCompleted();if(!done.includes(id)){done.push(id);localStorage.setItem(SURVEY_DONE_KEY,JSON.stringify(done));}}
function hasShownSurveyToday(){const today=new Date().toISOString().slice(0,10);return localStorage.getItem(SURVEY_SHOWN_TODAY_KEY)===today;}
function markSurveyShownToday(){localStorage.setItem(SURVEY_SHOWN_TODAY_KEY,new Date().toISOString().slice(0,10));}
function getNextSurvey(){const done=getSurveysCompleted();const rem=SURVEY_ORDER.filter(id=>!done.includes(id));if(rem.length===0)return null;return rem[Math.floor(Math.random()*rem.length)];}
function renderSurvey(surveyId){
  const survey=SURVEYS[surveyId];if(!survey)return;
  const el=document.getElementById('surveyQuestion');const titleEl=document.getElementById('surveyTitle');const optionsEl=document.getElementById('surveyOptions');
  if(!el||!titleEl||!optionsEl)return;
  titleEl.innerHTML=survey.title;optionsEl.innerHTML='';
  survey.options.forEach(opt=>{
    const div=document.createElement('div');div.className='survey-option';
    div.style.cssText='background:'+opt.bg+'; border:2px solid '+opt.border+'; padding:12px 14px; display:flex; align-items:center; gap:12px; text-align:left; border-radius:10px; cursor:pointer; transition:all 0.3s;';
    div.dataset.surveyId=surveyId;div.dataset.value=opt.value;div.dataset.pct=opt.pct;div.dataset.color=opt.color;
    div.innerHTML='<div style="min-width:40px;height:40px;background:rgba(0,0,0,0.3);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.4em;border:2px solid rgba(255,255,255,0.2);">'+opt.icon+'</div><div style="flex:1;"><div style="font-size:0.9em;font-weight:900;letter-spacing:1px;color:white;">'+opt.label+'</div>'+(opt.sub?'<div style="font-size:0.72em;opacity:0.85;margin-top:2px;color:white;">'+opt.sub+'</div>':'')+'<div class="tribe-bar" style="display:none;margin-top:6px;background:rgba(0,0,0,0.3);border-radius:4px;height:8px;overflow:hidden;"><div class="tribe-fill" style="height:100%;border-radius:4px;transition:width 0.8s ease;"></div></div></div><div class="tribe-pct" style="display:none;font-size:1.1em;font-weight:900;min-width:42px;text-align:right;color:white;"></div>';
    div.onclick=()=>handleSurveyClick(div,surveyId,opt.value);
    optionsEl.appendChild(div);
  });
  el.style.display='block';
  const saved=localStorage.getItem('80sGrid_surveyAnswer_'+surveyId);
  if(saved)revealSurveyResults(surveyId,saved);
}
function handleSurveyClick(el,surveyId,value){
  if(document.getElementById('surveyOptions').classList.contains('survey-voted'))return;
  localStorage.setItem('80sGrid_surveyAnswer_'+surveyId,value);
  markSurveyCompleted(surveyId);
  try{fetch(SURVEY_FORMSPREE,{method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({type:'survey',survey_id:surveyId,answer:value,quiz:'Quiz '+QUIZ_NUM,date:new Date().toISOString()})});}catch(e){}
  revealSurveyResults(surveyId,value);
}
function revealSurveyResults(surveyId,chosen){
  const survey=SURVEYS[surveyId];if(!survey)return;
  const optionsEl=document.getElementById('surveyOptions');optionsEl.classList.add('survey-voted');
  optionsEl.querySelectorAll('.survey-option').forEach(card=>{
    const val=card.dataset.value;const pct=parseInt(card.dataset.pct);const color=card.dataset.color;const isChosen=val===chosen;
    const bar=card.querySelector('.tribe-bar');if(bar)bar.style.display='block';
    const fill=card.querySelector('.tribe-fill');if(fill){fill.style.background=isChosen?'linear-gradient(135deg,'+color+',#fff)':color;setTimeout(()=>{fill.style.width=pct+'%';},50);}
    const pctEl=card.querySelector('.tribe-pct');if(pctEl){pctEl.style.display='block';pctEl.textContent=pct+'%';}
    if(isChosen){card.classList.add('selected');card.style.boxShadow='0 0 20px '+color+', inset 0 0 10px rgba(255,255,255,0.1)';}
    else{card.style.opacity='0.65';}
    card.style.cursor='default';card.onclick=null;
  });
}
function maybeShowSurvey(isFirstPlay){
  if(!isFirstPlay)return;
  if(hasShownSurveyToday())return;
  const nextId=getNextSurvey();if(!nextId)return;
  markSurveyShownToday();
  renderSurvey(nextId);
}
function restoreSurveyOnLoad(){
  if(!hasShownSurveyToday())return;
  for(const id of SURVEY_ORDER){
    const saved=localStorage.getItem('80sGrid_surveyAnswer_'+id);
    if(saved){renderSurvey(id);break;}
  }
}
/* ===== END SURVEY SYSTEM ===== */
document.addEventListener('DOMContentLoaded',()=>{ initializeCells(); updatePlaysCounter(); displayLeaderboard(); initNav(); restoreSurveyOnLoad(); });
</script>
</body>
</html>