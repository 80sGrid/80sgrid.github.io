<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FE9N3JWSGN"></script>
<script src="analytics.js"></script>
<script src="survey.js"></script>
<title>Len's 80sGrid.com Music Edition</title>
<meta property="og:type" content="website">
<meta property="og:url" content="https://80sgrid.com/">
<meta property="og:title" content="Len's 80sGrid.com Music Edition">
<meta property="og:description" content="Test your 80s music knowledge! Marvin Berry and the Starlighters, Morris Day and the Time, and The Sorels!">
<meta property="og:image" content="https://raw.githubusercontent.com/80sGrid/80sgrid.github.io/main/images/header26.jpg">
<style>
body { font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); padding:20px; overflow-x:hidden; box-sizing:border-box; }
.container { background:white; padding:30px; border-radius:15px; box-shadow:0 10px 40px rgba(0,0,0,0.3); max-width:700px; width:100%; box-sizing:border-box; }
.logo-img { display:block; margin:0 auto 10px; max-width:100%; height:auto; }
.tagline-sub { text-align:center; font-family:'Georgia',serif; font-size:1.4em; font-style:italic; color:#6a0dad; letter-spacing:2px; margin:0 0 20px; text-shadow:1px 1px 3px rgba(0,0,0,0.15); }
.subtitle { text-align:center; margin-bottom:30px; font-size:4.5em; font-weight:bold; color:#ff006e; text-shadow:3px 3px 0px #fb5607,6px 6px 0px #ffbe0b,9px 9px 0px #8338ec,12px 12px 0px #3a86ff; font-family:'Arial Black',sans-serif; letter-spacing:5px; transform:perspective(500px) rotateX(5deg); }
.how-to-play { background:linear-gradient(135deg,#FF1493 0%,#8B00FF 50%,#00CED1 100%); padding:20px; border-radius:12px; margin-bottom:20px; color:white; box-shadow:0 0 20px rgba(255,20,147,.4); border:3px solid rgba(255,255,255,.3); }
.how-to-play h2 { text-align:center; margin-top:0; margin-bottom:10px; font-size:1.5em; text-shadow:2px 2px 4px rgba(0,0,0,.5); }
.how-to-play p { margin:0; line-height:1.6; text-shadow:1px 1px 2px rgba(0,0,0,.5); }
.grid { display:grid; grid-template-columns:100px repeat(3,1fr); grid-template-rows:70px repeat(3,110px); gap:8px; margin-bottom:20px; }
.header { background:#667eea; color:white; display:flex; align-items:center; justify-content:center; text-align:center; padding:8px; border-radius:8px; font-weight:bold; font-size:0.85em; line-height:1.2; word-wrap:break-word; hyphens:auto; }
.header.col-header:nth-child(2) { background:linear-gradient(135deg,#FF1493,#FF69B4); box-shadow:0 0 15px rgba(255,20,147,.6); border:2px solid #FF1493; }
.header.col-header:nth-child(3) { background:linear-gradient(135deg,#00CED1,#1E90FF); box-shadow:0 0 15px rgba(0,206,209,.6); border:2px solid #00CED1; }
.header.col-header:nth-child(4) { background:linear-gradient(135deg,#FFD700,#FFA500); box-shadow:0 0 15px rgba(255,215,0,.6); border:2px solid #FFD700; color:#000; font-weight:900; }
.header.row-header { background:linear-gradient(135deg,#8B00FF,#DA70D6); box-shadow:0 0 15px rgba(139,0,255,.6); border:2px solid #8B00FF; }
.col-header { grid-row:1; }
.row-header { grid-column:1; }
.cell { background:#f8f9fa; border:2px solid #dee2e6; border-radius:8px; display:flex; align-items:center; justify-content:center; padding:14px 8px; cursor:pointer; }
.cell input { width:100%; padding:10px 8px; border:none; background:transparent; text-align:center; font-size:0.7em; font-weight:bold; outline:none; cursor:pointer; pointer-events:none; line-height:1.8; }
.cell input::placeholder { color:#8B00FF; font-style:italic; font-size:1.15em; opacity:0.6; white-space:normal; word-spacing:100vw; }
.cell.correct { background:#d4edda; border-color:#28a745; }
.cell.incorrect { background:#f8d7da; border-color:#dc3545; }
.button-container { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-bottom:10px; }
button { background:#667eea; color:white; border:none; padding:12px 25px; border-radius:8px; cursor:pointer; font-size:1em; transition:background 0.3s; }
button:hover { background:#5568d3; }
#results { margin-top:20px; padding:20px; background:#e7f3ff; border:2px solid #667eea; border-radius:8px; text-align:center; }
.next-quiz-btn { display:inline-block; margin:15px auto; background:linear-gradient(135deg,#FF1493,#8B00FF); color:white; text-decoration:none; padding:18px 40px; border-radius:12px; font-size:1.3em; font-weight:900; font-family:'Arial Black',sans-serif; letter-spacing:2px; box-shadow:0 0 25px rgba(255,20,147,0.7),0 5px 15px rgba(0,0,0,0.3); animation:pulse 1.5s infinite; }
.next-quiz-btn:hover { transform:scale(1.05); }
@keyframes pulse { 0%,100% { box-shadow:0 0 25px rgba(255,20,147,0.7),0 5px 15px rgba(0,0,0,0.3); } 50% { box-shadow:0 0 45px rgba(255,20,147,1),0 5px 20px rgba(0,0,0,0.4); } }

/* INPUT MODAL */
.input-modal { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:30px; border-radius:15px; box-shadow:0 10px 50px rgba(0,0,0,0.5); z-index:3500; display:none; min-width:300px; max-width:92%; width:340px; box-sizing:border-box; }
.input-modal.active { display:block; }
.input-modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.7); z-index:3499; display:none; }
.input-modal-overlay.active { display:block; }
.input-modal h3 { margin-top:0; margin-bottom:16px; color:#333; font-size:1.1em; text-align:center; line-height:1.4; }
.input-modal input { width:100%; padding:15px; font-size:1.1em; border:2px solid #667eea; border-radius:8px; margin-bottom:12px; box-sizing:border-box; }
.input-modal-buttons { display:flex; gap:10px; margin-bottom:0; }
.input-modal-buttons button { flex:1; padding:12px; font-size:1em; }

/* MULTIPLE CHOICE button */
.mc-toggle-btn {
  display: block;
  width: 100%;
  margin-top: 12px;
  padding: 11px;
  background: linear-gradient(135deg, #FF1493, #8B00FF);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 0.95em;
  font-weight: bold;
  cursor: pointer;
  letter-spacing: 0.5px;
  transition: opacity 0.2s;
}
.mc-toggle-btn:hover { opacity: 0.88; background: linear-gradient(135deg, #FF1493, #8B00FF); }

/* MULTIPLE CHOICE options */
.mc-section { display:none; margin-top:4px; }
.mc-section.visible { display:block; }
.mc-option {
  display: block;
  width: 100%;
  margin-bottom: 10px;
  padding: 14px 12px;
  background: #f8f0ff;
  border: 2px solid #8B00FF;
  border-radius: 10px;
  font-size: 0.95em;
  font-weight: bold;
  color: #4a0080;
  cursor: pointer;
  text-align: center;
  transition: background 0.15s, transform 0.1s;
  box-sizing: border-box;
}
.mc-option:hover { background: #e8c8ff; transform: scale(1.02); }
.mc-option:last-child { margin-bottom: 0; }

/* text input section */
.text-section { }
.text-section.hidden { display:none; }

/* STATS / LIMIT / LEADERBOARD ‚Äî same as other grids */
.stats-modal { display:none; position:fixed; inset:0; z-index:3000; background:rgba(0,0,0,0.75); align-items:center; justify-content:center; }
.stats-modal.show { display:flex; }
.stats-box { background:#000; border:3px solid #FF1493; border-radius:12px; padding:35px 30px; width:90%; max-width:320px; font-family:'Courier New',monospace; box-shadow:0 0 40px rgba(255,20,147,0.6); }
.stats-box h2 { color:#FF1493; text-shadow:0 0 10px #FF1493; font-size:1.3em; letter-spacing:3px; margin:0 0 5px; text-align:center; }
.stats-sub { color:#00ffff; text-align:center; font-size:0.75em; letter-spacing:2px; margin-bottom:20px; }
.stat-row { border-bottom:1px solid rgba(255,20,147,0.3); padding:12px 0; display:flex; justify-content:space-between; align-items:center; }
.stat-label { color:#aaa; font-size:0.85em; letter-spacing:1px; }
.stat-value { color:#ffff00; font-size:1.2em; font-weight:bold; text-shadow:0 0 8px #ffff00; }
.stats-close { display:block; margin:25px auto 0; background:#FF1493; color:#000; border:none; padding:10px 30px; font-family:'Courier New',monospace; font-weight:bold; font-size:1em; cursor:pointer; letter-spacing:2px; border-radius:4px; }
.limit-modal { display:none; position:fixed; inset:0; z-index:3000; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; }
.limit-modal.show { display:flex; }
.limit-box { background:#000; border:4px solid #FF1493; border-radius:12px; padding:40px 30px; text-align:center; font-family:'Courier New',monospace; max-width:320px; width:90%; box-shadow:0 0 40px rgba(255,20,147,0.7); }
.limit-box h2 { color:#ffff00; text-shadow:0 0 10px #ffff00; font-size:1.4em; letter-spacing:3px; margin-bottom:15px; }
.limit-box p { color:#00ff00; line-height:1.7; margin-bottom:20px; }
.limit-box button { background:#FF1493; color:#000; border:none; padding:12px 30px; font-family:'Courier New',monospace; font-weight:bold; font-size:1em; cursor:pointer; border-radius:4px; }
.high-score-entry { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#000; color:#00ff00; padding:40px; border-radius:10px; border:4px solid #00ff00; box-shadow:0 0 30px rgba(0,255,0,.5); text-align:center; z-index:1000; font-family:'Courier New',monospace; width:90%; max-width:340px; box-sizing:border-box; }
.high-score-entry h2 { color:#ffff00; text-shadow:0 0 10px #ffff00; margin-bottom:20px; }
.initials-input { display:flex; gap:15px; justify-content:center; margin:20px 0; }
.initials-input input { width:60px; height:80px; font-size:3em; text-align:center; background:#000; border:3px solid #00ff00; color:#00ff00; text-transform:uppercase; font-family:'Courier New',monospace; }
.arcade-button { background:#00ff00; color:#000; border:none; padding:15px 40px; font-size:1.2em; font-weight:bold; cursor:pointer; font-family:'Courier New',monospace; box-shadow:0 0 20px rgba(0,255,0,.5); }
.arcade-button:hover { background:#00cc00; }
.leaderboard { margin-top:30px; background:#000 url('https://www.dropbox.com/scl/fi/awkqv845s9slzs58wbz12/highscores.png?rlkey=r7n3hyq795099jgavqyk5xe1t&st=4rsy91bk&raw=1') center top/contain no-repeat; color:#00ff00; padding:15px; border-radius:10px; border:3px solid #00ff00; font-family:'Courier New',monospace; box-shadow:0 0 30px rgba(0,255,0,.5),inset 0 0 20px rgba(0,255,0,.1); min-height:300px; width:100%; box-sizing:border-box; }
.leaderboard-scores-wrap { margin-top:160px; background:rgba(0,0,0,0.75); border-radius:8px; padding:15px 10px 10px; }
.leaderboard-subtitle { text-align:center; color:#00ffff; margin-bottom:15px; font-size:0.85em; letter-spacing:3px; }
.leaderboard-item { display:grid; grid-template-columns:40px 70px 1fr 80px; padding:8px 5px; border-bottom:1px solid rgba(0,255,0,.3); font-size:1em; letter-spacing:2px; }
.leaderboard-item:last-child { border-bottom:none; }
.leaderboard-rank { color:#ffff00; text-shadow:0 0 5px #ffff00; }
.leaderboard-initials { color:#00ff00; font-weight:bold; text-shadow:0 0 5px #00ff00; }
.leaderboard-score { color:#ff00ff; text-shadow:0 0 5px #ff00ff; }
.leaderboard-date { color:#00ffff; text-align:right; font-size:0.8em; }
.footnote-box { background:#f8f0ff; border-left:4px solid #8B00FF; padding:14px 16px; border-radius:8px; margin-bottom:20px; font-size:0.85em; line-height:1.7; color:#444; }
.footnote-box strong { color:#6a0dad; display:block; margin-bottom:6px; }
.footnote-box li { margin-left:16px; margin-bottom:4px; }

.nav-legend { text-align:center; font-size:0.75em; color:#666; margin-bottom:16px; }
@media (max-width:768px) { .container{padding:15px;} .subtitle{font-size:2.5em;letter-spacing:3px;} .grid{grid-template-columns:80px repeat(3,1fr);grid-template-rows:60px repeat(3,100px);gap:6px;} .header{font-size:.65em;padding:6px;} .next-quiz-btn{font-size:1.1em;padding:15px 25px;} .leaderboard-scores-wrap{margin-top:100px;} }

/* DIFFICULTY BADGE */
.group-tabs { display:flex; justify-content:center; gap:6px; margin-bottom:10px; }
.group-tab { flex:1; padding:8px 4px; text-align:center; font-family:Arial,sans-serif; font-size:0.75em; font-weight:900; letter-spacing:1px; border:2px solid #ddd; border-radius:8px; background:#f0f0f0; color:#999; cursor:pointer; transition:all 0.3s; }
.group-tab:hover { border-color:#667eea; color:#667eea; background:#f0f0ff; }
.group-tab.active { border-color:#667eea; color:white; background:#667eea; box-shadow:0 3px 10px rgba(102,126,234,0.4); }
.quiz-grid-nav { display:grid; grid-template-columns:repeat(5,1fr); gap:8px; margin-bottom:10px; }
.quiz-grid-nav a { display:flex; align-items:center; justify-content:center; aspect-ratio:1.2; border-radius:10px; font-family:'Arial Black',sans-serif; font-size:1.1em; font-weight:900; letter-spacing:1px; color:white; cursor:pointer; transition:all 0.2s; text-decoration:none; border:none; position:relative; }
.quiz-grid-nav a:hover { transform:scale(1.08); }
.quiz-grid-nav a.easy { background:linear-gradient(135deg,#28a745,#20913b); box-shadow:0 3px 10px rgba(40,167,69,0.4); }
.quiz-grid-nav a.easy:hover { box-shadow:0 5px 18px rgba(40,167,69,0.6); }
.quiz-grid-nav a.medium { background:linear-gradient(135deg,#fd7e14,#e06b00); box-shadow:0 3px 10px rgba(253,126,20,0.4); }
.quiz-grid-nav a.medium:hover { box-shadow:0 5px 18px rgba(253,126,20,0.6); }
.quiz-grid-nav a.hard { background:linear-gradient(135deg,#dc3545,#c42030); box-shadow:0 3px 10px rgba(220,53,69,0.4); }
.quiz-grid-nav a.hard:hover { box-shadow:0 5px 18px rgba(220,53,69,0.6); }
.quiz-grid-nav a.current { outline:3px solid #667eea; outline-offset:2px; animation:navpulse 2s ease-in-out infinite; }
@keyframes navpulse { 0%,100%{outline-color:#667eea;} 50%{outline-color:#FF1493;} }
.quiz-grid-nav a.played { background:linear-gradient(135deg,#bbb,#999); box-shadow:0 2px 6px rgba(0,0,0,0.15); opacity:0.7; }
.quiz-grid-nav a.played:hover { transform:none; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
.quiz-grid-nav a.played::after { content:'\2713'; position:absolute; top:1px; right:4px; font-size:0.5em; color:white; opacity:0.8; }
.nav-legend2 { text-align:center; font-size:0.72em; color:#666; margin-bottom:4px; line-height:1.8; }
.nav-status-bar { background:#f0f4ff; border:2px solid #667eea; border-radius:10px; padding:8px 14px; text-align:center; font-size:0.82em; font-weight:bold; color:#667eea; margin-bottom:4px; }
.nav-status-bar.limit-reached { background:#fff0f0; border-color:#dc3545; color:#dc3545; }
.nav-replay-note { text-align:center; font-size:0.72em; color:#888; font-style:italic; margin-bottom:14px; line-height:1.4; }

.difficulty-badge {
display: flex;
align-items: center;
justify-content: center;
gap: 12px;
margin: 0 0 20px;
padding: 14px 20px;
border-radius: 12px;
border: 2px solid var(--badge-color);
background: color-mix(in srgb, var(--badge-color) 10%, white);
box-shadow: 0 0 20px var(--badge-glow);
}
.badge-left { text-align: left; }
.badge-label {
font-family: 'Arial Black', sans-serif;
font-size: 1.1em;
font-weight: 900;
letter-spacing: 2px;
color: var(--badge-color);
text-transform: uppercase;
}
.badge-score {
font-size: 0.8em;
color: #666;
font-weight: bold;
margin-top: 2px;
}
.badge-stars {
font-size: 1.5em;
color: var(--badge-color);
letter-spacing: 2px;
}
.badge-desc {
font-size: 0.75em;
color: #888;
font-style: italic;
margin-top: 2px;
}

/* LIFELINE COUNTER */
.lifeline-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 0 0 16px;
  padding: 10px 18px;
  background: linear-gradient(135deg, #fff0f8, #f0f0ff);
  border: 2px solid rgba(139,0,255,0.25);
  border-radius: 10px;
  font-family: 'Arial Black', sans-serif;
}
.lifeline-label {
  font-size: 0.8em;
  font-weight: 900;
  color: #555;
  letter-spacing: 1px;
  text-transform: uppercase;
}
.lifeline-pips {
  display: flex;
  gap: 5px;
}
.lifeline-pip {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: linear-gradient(135deg, #FF1493, #8B00FF);
  box-shadow: 0 0 8px rgba(255,20,147,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75em;
  transition: all 0.3s;
}
.lifeline-pip.used {
  background: #dee2e6;
  box-shadow: none;
}
.lifeline-count {
  font-size: 0.82em;
  color: #888;
  font-style: italic;
}
.lifeline-count.empty {
  color: #dc3545;
  font-weight: bold;
}
.no-lifeline-badge {
  display: none;
  text-align: center;
  margin: 10px 0;
  padding: 8px 14px;
  background: linear-gradient(135deg, #FFD700, #FFA500);
  border-radius: 8px;
  font-weight: 900;
  font-size: 0.9em;
  color: #000;
  box-shadow: 0 0 12px rgba(255,215,0,0.5);
}

/* SURVEY TRIBE CARDS */
.survey-option:hover { transform:scale(1.02); filter:brightness(1.15); }
.survey-option.selected { box-shadow:0 0 25px rgba(0,255,0,0.6), inset 0 0 15px rgba(0,255,0,0.1); border-color:#00ff00 !important; transform:scale(1.03); }

/* DESKTOP NAV COMPACT */
@media (min-width: 600px) {
  #quizGridNav { grid-template-columns: repeat(5, 55px) !important; gap: 6px !important; justify-content: center !important; }
  #quizGridNav a { width: 55px !important; height: 40px !important; font-size: 15px !important; border-radius: 8px !important; line-height: 40px !important; }
  .group-tabs { gap: 4px !important; }
  .group-tab { padding: 5px 14px !important; font-size: 0.8em !important; }
}

.secret-code-btn { display:none; margin:8px auto 0; padding:6px 16px; background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; border-radius:20px; font-size:0.8em; font-weight:bold; cursor:pointer; text-align:center; animation:pulseGlow 2s infinite; }
.secret-code-btn:hover { transform:scale(1.05); }
@keyframes pulseGlow { 0%,100%{box-shadow:0 0 5px rgba(102,126,234,0.4)} 50%{box-shadow:0 0 15px rgba(102,126,234,0.8)} }


/* DESKTOP NAV COMPACT */
@media (min-width: 600px) {
  #quizGridNav { grid-template-columns: repeat(5, 55px) !important; gap: 6px !important; justify-content: center !important; }
  #quizGridNav a { width: 55px !important; height: 40px !important; font-size: 15px !important; border-radius: 8px !important; line-height: 40px !important; }
  .group-tabs { gap: 4px !important; }
  .group-tab { padding: 5px 14px !important; font-size: 0.8em !important; }
}
/* UNLOCK PANEL */
.unlock-panel { display:none; background:linear-gradient(135deg, #f8f0ff, #f0f4ff); border:2px solid #764ba2; border-radius:12px; padding:18px 20px; margin-top:10px; text-align:center; }
.unlock-panel.show { display:block; }
.unlock-panel h3 { margin:0 0 12px; font-size:1em; color:#764ba2; }
.code-row { display:flex; align-items:center; justify-content:center; gap:8px; margin-bottom:14px; flex-wrap:wrap; }
.code-row label { font-size:0.85em; font-weight:bold; color:#555; white-space:nowrap; }
.code-input { padding:10px 14px; border:2px solid #ccc; border-radius:8px; font-size:1em; text-transform:uppercase; letter-spacing:2px; width:160px; text-align:center; outline:none; transition:border 0.2s; }
.code-input:focus { border-color:#764ba2; }
.code-input::placeholder { color:#ccc; letter-spacing:1px; text-transform:none; }
.code-submit { padding:10px 18px; background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; border-radius:8px; font-size:0.9em; font-weight:bold; cursor:pointer; transition:transform 0.15s; }
.code-submit:hover { transform:scale(1.05); }
.code-hint { font-size:0.72em; color:#bbb; margin-top:6px; }
.unlock-divider { display:flex; align-items:center; gap:14px; margin:18px 0; color:#764ba2; font-size:1.1em; font-weight:bold; text-transform:uppercase; letter-spacing:2px; }
.unlock-divider::before,.unlock-divider::after { content:''; flex:1; height:2px; background:linear-gradient(to right, transparent, #764ba2, transparent); }
.email-unlock-btn { display:inline-block; padding:10px 24px; background:linear-gradient(135deg,#28a745,#20c997); color:white; border:none; border-radius:25px; font-size:0.9em; font-weight:bold; cursor:pointer; transition:transform 0.15s,box-shadow 0.15s; box-shadow:0 3px 12px rgba(40,167,69,0.3); }
.email-unlock-btn:hover { transform:scale(1.03); box-shadow:0 5px 20px rgba(40,167,69,0.5); }
.email-expand { display:none; margin-top:12px; }
.email-expand.show { display:block; }
.email-expand input { padding:10px 14px; border:2px solid #28a745; border-radius:8px; font-size:1em; width:220px; text-align:center; outline:none; }
.email-expand input:focus { border-color:#20c997; }
.email-expand input::placeholder { color:#bbb; }
.email-expand-submit { margin-top:8px; padding:10px 24px; background:linear-gradient(135deg,#28a745,#20c997); color:white; border:none; border-radius:8px; font-size:0.9em; font-weight:bold; cursor:pointer; }
.email-note { font-size:0.72em; color:#aaa; margin-top:8px; }
.unlock-success-msg { display:none; text-align:center; padding:12px; margin-top:10px; border-radius:10px; background:#f0fff4; border:2px solid #28a745; color:#28a745; }
.unlock-success-msg.show { display:block; }
.unlock-success-msg .big { font-size:1.5em; }
/* SECRET LIFELINE BUTTON */
.secret-code-btn { display:none; margin:8px auto 0; padding:6px 16px; background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; border-radius:20px; font-size:0.8em; font-weight:bold; cursor:pointer; text-align:center; animation:pulseGlow 2s infinite; }
.secret-code-btn:hover { transform:scale(1.05); }
@keyframes pulseGlow { 0%,100%{box-shadow:0 0 5px rgba(102,126,234,0.4)} 50%{box-shadow:0 0 15px rgba(102,126,234,0.8)} }

</style>
</head>
<body>

<!-- Input Modal -->
<div class="input-modal-overlay" id="inputOverlay"></div>
<div class="input-modal" id="inputModal">
  <h3 id="modalTitle">Enter Answer</h3>

  <!-- Text entry section -->
  <div class="text-section" id="textSection">
    <input type="text" id="modalInput" placeholder="Type your answer..." />
    <div class="input-modal-buttons">
      <button onclick="saveModalAnswer()">Save</button>
      <button onclick="closeModal()" style="background:#6c757d;">Cancel</button>
    </div>
    <button class="mc-toggle-btn" id="mcToggleBtn" onclick="showMultipleChoice()">üéØ Multiple Choice (<span id="mcRemaining">3</span> left)</button>
  </div>

  <!-- Multiple choice section -->
  <div class="mc-section" id="mcSection">
    <div id="mcOptions"></div>
    <button onclick="showTextEntry()" style="width:100%; margin-top:12px; background:#6c757d; padding:10px; font-size:0.9em;">‚úèÔ∏è Type My Own Answer</button>
  </div>
</div>

<!-- Stats Modal -->
<div class="stats-modal" id="statsModal" onclick="if(event.target===this) toggleStats()">
  <div class="stats-box">
    <h2>‚òÖ MY STATS ‚òÖ</h2>
    <div class="stats-sub">PLAYER PROFILE</div>
    <div class="stat-row"><span class="stat-label">QUIZZES TODAY</span><span class="stat-value" id="statToday">0</span></div>
    <div class="stat-row"><span class="stat-label">TOTAL PLAYED</span><span class="stat-value" id="statTotal">0</span></div>
    <div class="stat-row"><span class="stat-label">CUMULATIVE SCORE</span><span class="stat-value" id="statCumulative">0/63</span></div>
    <div class="stat-row"><span class="stat-label">BEST QUIZ SCORE</span><span class="stat-value" id="statBest">0/9</span></div>
    <div class="stat-row"><span class="stat-label">üî• DAY STREAK</span><span class="stat-value" id="statStreak">0</span></div>
    <button class="stats-close" onclick="toggleStats()">CLOSE</button>
    <p style="color:#000; font-style:italic; font-size:0.78em; text-align:center; margin-top:16px; margin-bottom:0; letter-spacing:0.5px;">üéØ Lifeline available ‚Äî click any cell to find it.</p>
  </div>
</div>

<!-- Daily Limit Modal -->
<div class="limit-modal" id="limitModal">
  <div class="limit-box">
    <h2>‚ö° GAME OVER ‚ö°</h2>
    <p>You've maxed out your quizzes for today!<br><br>üé∏ Come back tomorrow for more 80s glory! üé∏</p>
    <button onclick="document.getElementById('limitModal').classList.remove('show')">OK, SEE YOU TOMORROW!</button>
  </div>
</div>

<div class="container">
  <img src="https://raw.githubusercontent.com/80sGrid/80sgrid.github.io/main/images/header26.jpg" alt="80s Grid Header" class="logo-img">
  <div style="text-align:center; margin:8px 0 16px; font-size:0.88em; font-family:Arial,sans-serif;">
    <a href="about.html" style="color:#8B00FF; font-weight:bold; text-decoration:none; margin:0 12px;">About</a>
    <span style="color:#ccc;">|</span>
    <a href="sponsor.html" style="color:#8B00FF; font-weight:bold; text-decoration:none; margin:0 12px;">Sponsor</a>
    <span style="color:#ccc;">|</span>
    <a href="collaborate.html" style="color:#8B00FF; font-weight:bold; text-decoration:none; margin:0 12px;">Collaborate</a>
  </div>
  <div class="tagline-sub">Big Hair. Bigger Hits. Better Quizzes.</div>

  <div class="group-tabs" id="groupTabs"></div>
<div class="quiz-grid-nav" id="quizGridNav"></div>
<div class="nav-legend2">&#129001; Easy &nbsp;|&nbsp; &#128992; Medium &nbsp;|&nbsp; &#128308; Hard &nbsp;|&nbsp; &#9745; Completed</div>
<div class="nav-status-bar" id="navStatusBar"></div>
<div class="unlock-panel" id="unlockPanel"><h3>üîì Want to keep playing?</h3><div class="code-row"><label>Have a secret code?</label><input type="text" class="code-input" id="unlockCodeInput" placeholder="Enter code"><button class="code-submit" onclick="submitUnlockCode()">Submit</button></div><div class="code-hint">Hint: Codes drop on our social media & the Arrive Alive Podcast</div><div class="unlock-divider">OR</div><button class="email-unlock-btn" onclick="toggleUnlockEmail()">üìß Enter your email for a free bonus play!</button><div class="email-expand" id="unlockEmailExpand"><div style="margin-top:8px;"><input type="email" id="unlockEmailInput" placeholder="your@email.com"></div><button class="email-expand-submit" onclick="submitUnlockEmail()">Unlock Bonus Quiz üé∏</button><div class="email-note">We'll send you 80s trivia tips & new quiz alerts. Unsubscribe anytime.</div></div><div class="unlock-success-msg" id="unlockSuccess"><span class="big" id="unlockSuccessEmoji">üéâ</span><br><strong id="unlockSuccessText">Bonus quiz unlocked!</strong></div></div>
<div class="nav-replay-note">&#10003; Completed quizzes can be replayed anytime &mdash; they won&rsquo;t use a play.</div>

  <div class="subtitle">Quiz 35</div>
<div class="difficulty-badge" style="--badge-color:#dc3545; --badge-glow:rgba(220,53,69,0.4);">
<div class="badge-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
<div class="badge-left">
<div class="badge-label">Difficulty: HARD</div>
<div class="badge-score">Difficulty Score: 9/10</div>
<div class="badge-desc">Fictional bands, movie cameos, and cult soundtracks. Brace yourself.</div>
</div>
</div>

  <!-- Lifeline Counter -->
  <div class="lifeline-bar" id="lifelineBar">
    <span class="lifeline-label">üéØ Lifelines</span>
    <div class="lifeline-pips">
      <div class="lifeline-pip" id="pip1">üéØ</div>
      <div class="lifeline-pip" id="pip2">üéØ</div>
      <div class="lifeline-pip" id="pip3">üéØ</div>
    </div>
    <span class="lifeline-count" id="lifelineCount">3 remaining</span>
  </div>
  <div class="no-lifeline-badge" id="noLifelineBadge">üèÜ No Lifelines Used ‚Äî Pure 80s Knowledge!</div>

  <div style="text-align:center; margin-bottom:15px;">
    <div style="margin-bottom:8px;"><span id="playsCounter" style="color:#667eea; font-weight:bold; font-size:.9em;">üéÆ Loading plays...</span></div>
    <div>
      <a href="#" onclick="showLeaderboard(); return false;" style="color:#667eea; text-decoration:none; font-weight:bold; font-size:.9em;">üèÜ High Scores</a>
      <span style="margin:0 8px; color:#ccc;">|</span>
      <a href="#" onclick="toggleStats(); return false;" style="color:#667eea; text-decoration:none; font-weight:bold; font-size:.9em;">üìä My Stats</a>
      <span style="margin:0 8px; color:#ccc;">|</span>
      <a href="#" onclick="toggleHowToPlay(); return false;" style="color:#667eea; text-decoration:none; font-weight:bold; font-size:.9em;">üìñ How to Play</a>
    </div>
    <div style="margin-top:8px;">
      <em style="color:#000; font-size:0.82em;">üéØ Lifeline available ‚Äî click any cell to find it.</em>
    </div>
  </div>

  <!-- How to Play (hidden by default, toggle on click) -->
  <div class="how-to-play" id="howToPlayBox" style="display:none;">
    <h2>How to Play</h2>
    <p>Match the artist (column) with the category (row). Click any box to type your answer ‚Äî or hit <strong>üéØ Multiple Choice</strong> if you need a hint. Multiple answers may work!</p>
  </div>

  <div class="grid">
    <div class="header" style="grid-row:1; grid-column:1; background:transparent;"></div>
    <div class="header col-header" style="grid-column:2;">Marvin Berry and the Starlighters</div>
    <div class="header col-header" style="grid-column:3;">Morris Day and the Time</div>
    <div class="header col-header" style="grid-column:4;">The Sorels</div>

    <div class="header row-header" style="grid-row:2;">Famous Song with "Time" in the Title</div>
    <div class="cell" data-row="0" data-col="0"><input type="text" placeholder="Answer" readonly /></div>
    <div class="cell" data-row="0" data-col="1"><input type="text" placeholder="Answer" readonly /></div>
    <div class="cell" data-row="0" data-col="2"><input type="text" placeholder="Answer" readonly /></div>

    <div class="header row-header" style="grid-row:3;">What Movie Did Band Perform In</div>
    <div class="cell" data-row="1" data-col="0"><input type="text" placeholder="Answer" readonly /></div>
    <div class="cell" data-row="1" data-col="1"><input type="text" placeholder="Answer" readonly /></div>
    <div class="cell" data-row="1" data-col="2"><input type="text" placeholder="Answer" readonly /></div>

    <div class="header row-header" style="grid-row:4;">Song Performed In Movie</div>
    <div class="cell" data-row="2" data-col="0"><input type="text" placeholder="Answer" readonly /></div>
    <div class="cell" data-row="2" data-col="1"><input type="text" placeholder="Answer" readonly /></div>
    <div class="cell" data-row="2" data-col="2"><input type="text" placeholder="Answer" readonly /></div>
  </div>

  <div class="footnote-box">
    <strong>üìù Notes</strong>
    <ul>
      <li>Marvin Berry and the Starlighters are the fictional band in Back to the Future whose lead guitarist breaks his hand ‚Äî forcing Marty McFly to step in and perform "Johnny B. Goode."</li>
      <li>Morris Day and the Time were Prince's real-life Minneapolis rivals who appeared in Purple Rain (1984) ‚Äî their performances of "Jungle Love" and "The Bird" were scene-stealers.</li>
      <li>The Sorels are the fictional band in Streets of Fire (1984) ‚Äî the film features Dan Hartman's "I Can Dream About You" performed by a fictional group called The Sorels.</li>
      <li>Streets of Fire has become one of the most beloved cult films of the 80s, featuring a soundtrack that captures the neon-drenched, rock operatic spirit of the decade.</li>
    </ul>
  </div>

  <div class="button-container">
    <button onclick="checkAnswers()">Check Answers</button>
    <button onclick="resetGrid()">Reset Grid</button>
    <button onclick="shareScore()" style="background:#FF1493;">üì§ Share with a Friend</button>
  </div>

  <div id="results" style="display:none;">
    <div id="score" style="font-size:1.3em; font-weight:bold; color:#333; margin-bottom:15px;"></div>
    
<div id="surveyContainer"></div>

<a href="quiz36.html" class="next-quiz-btn">üé∏ NEXT QUIZ ‚Üí üé∏</a>
    
  </div>

  <div id="highScoreEntry" class="high-score-entry" style="display:none;">
    <h2>‚òÖ HIGH SCORE ‚òÖ</h2>
    <p style="color:#00ff00; text-align:center; font-size:1.2em; margin-bottom:20px;">ENTER YOUR INITIALS</p>
    <div class="initials-input">
      <input type="text" maxlength="1" id="initial1" />
      <input type="text" maxlength="1" id="initial2" />
      <input type="text" maxlength="1" id="initial3" />
    </div>
    <div style="text-align:center; margin-top:20px;"><button class="arcade-button" onclick="saveHighScore()">SAVE</button></div>
  </div>

  <div id="leaderboard" class="leaderboard" style="display:none;">
    <div class="leaderboard-scores-wrap">
      <div class="leaderboard-subtitle"></div>
      <div id="leaderboardList"></div>
      <p style="color:#000; font-style:italic; font-size:0.78em; text-align:center; margin-top:16px; margin-bottom:0; letter-spacing:0.5px;">üéØ Lifeline available ‚Äî click any cell to find it.</p>
    </div>
  </div>
</div>

<script>
const DAILY_LIMIT = 2;
const QUIZ_NUM = 35;
window.QUIZ_NUM = QUIZ_NUM;
const QUIZ_KEY = 'quiz35Score';
const PLAYS_KEY = '80sGridPlaysQuiz35';
const SESSION_KEY = 'hasPlayedQuiz35';
let currentCell = null;

// ‚îÄ‚îÄ‚îÄ ANSWERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const answers = {
  '0-0': ['fake'],
  '1-0': ['real'],
  '2-0': ['fake'],
  '0-1': ['back to the future'],
  '1-1': ['purple rain'],
  '2-1': ['streets of fire'],
  '0-2': ['earth angel'],
  '1-2': ['jungle love', 'the bird'],
  '2-2': ['i can dream about you']
};

// ‚îÄ‚îÄ‚îÄ MULTIPLE CHOICE OPTIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const mcOptions = {
  '0-0': ['Fake', 'Real', 'Not Sure'],
  '1-0': ['Real', 'Fake', 'Not Sure'],
  '2-0': ['Fake', 'Real', 'Not Sure'],
  '0-1': ['Back to the Future', 'Purple Rain', 'Streets of Fire'],
  '1-1': ['Purple Rain', 'Back to the Future', 'Streets of Fire'],
  '2-1': ['Streets of Fire', 'Purple Rain', 'Back to the Future'],
  '0-2': ['Earth Angel', 'Johnny B. Goode', 'Power of Love'],
  '1-2': ['Jungle Love', 'The Bird', 'Raspberry Beret'],
  '2-2': ['I Can Dream About You', 'Tonight Is What It Means to Be Young', 'Nowhere Fast']
};

const colHeaders = ['Marvin Berry and the Starlighters', 'Morris Day and the Time', 'The Sorels'];
const rowHeaders = ['Real or Fake Band', 'What Movie Did Band Perform In', 'Song Performed In Movie'];

// ‚îÄ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function initializeCells() {
  document.querySelectorAll('.cell').forEach(cell => {
    cell.addEventListener('click', () => openModal(cell));
  });
}

function openModal(cell) {
  currentCell = cell;
  const row = cell.dataset.row;
  const col = cell.dataset.col;
  document.getElementById('modalTitle').textContent = colHeaders[parseInt(col)] + ' ‚Äî ' + rowHeaders[parseInt(row)];
  document.getElementById('modalInput').value = cell.querySelector('input').value;
  // Always open in text mode
  showTextEntry();
  document.getElementById('inputModal').classList.add('active');
  document.getElementById('inputOverlay').classList.add('active');
  setTimeout(() => document.getElementById('modalInput').focus(), 100);
}

function closeModal() {
  document.getElementById('inputModal').classList.remove('active');
  document.getElementById('inputOverlay').classList.remove('active');
  currentCell = null;
}

function saveModalAnswer() {
if (currentCell) {
const modalValue = document.getElementById('modalInput').value;

if (modalValue.toUpperCase() === 'RAD' && !radBonusUsed) {
  radBonusUsed = true;
  lifelinesRemaining++;
  updateLifelineUI();
  alert("Len's Bonus lifeline unlocked! üõü");
  document.getElementById('modalInput').value = '';
  document.getElementById('modalInput').focus();
  return;
}
const input = currentCell.querySelector('input');
input.value = modalValue;
closeModal();
}
}

// ‚îÄ‚îÄ‚îÄ LIFELINE SYSTEM ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let lifelinesRemaining = 3;
let radBonusUsed = false;

function updateLifelineUI() {
  // Update pips
  for (let i = 1; i <= 3; i++) {
    const pip = document.getElementById('pip' + i);
    if (i <= lifelinesRemaining) {
      pip.classList.remove('used');
      pip.textContent = 'üéØ';
    } else {
      pip.classList.add('used');
      pip.textContent = '';
    }
  }
  // Update count text
  const countEl = document.getElementById('lifelineCount');
  const btnEl = document.getElementById('mcToggleBtn');
  const remainEl = document.getElementById('mcRemaining');
  if (remainEl) remainEl.textContent = lifelinesRemaining;

  if (lifelinesRemaining === 0) {
    countEl.textContent = 'None left!';
    countEl.classList.add('empty');
      var scb=document.getElementById('secretCodeBtn');if(scb)scb.style.display='block';
    if (btnEl) {
      btnEl.disabled = true;
      btnEl.style.opacity = '0.4';
      btnEl.style.cursor = 'not-allowed';
      btnEl.title = 'No lifelines remaining';
    }
  } else {
    countEl.textContent = lifelinesRemaining + ' remaining';
    countEl.classList.remove('empty');
      var scb=document.getElementById('secretCodeBtn');if(scb)scb.style.display='none';
  }
}

// ‚îÄ‚îÄ‚îÄ MULTIPLE CHOICE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showMultipleChoice() {
  if (lifelinesRemaining <= 0) return;

  const row = currentCell.dataset.row;
  const col = currentCell.dataset.col;
  const key = `${row}-${col}`;
  const opts = [...mcOptions[key]];

  // Shuffle
  for (let i = opts.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [opts[i], opts[j]] = [opts[j], opts[i]];
  }

  const container = document.getElementById('mcOptions');
  container.innerHTML = '';
  opts.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'mc-option';
    btn.textContent = opt;
    btn.onclick = () => selectMCOption(opt);
    container.appendChild(btn);
  });

  document.getElementById('textSection').classList.add('hidden');
  document.getElementById('mcSection').classList.add('visible');
}

function showTextEntry() {
  document.getElementById('textSection').classList.remove('hidden');
  document.getElementById('mcSection').classList.remove('visible');
  setTimeout(() => document.getElementById('modalInput').focus(), 60);
}

function selectMCOption(value) {
  if (currentCell) {
    currentCell.querySelector('input').value = value;
    // Deduct lifeline
    lifelinesRemaining = Math.max(0, lifelinesRemaining - 1);
    updateLifelineUI();
    closeModal();
  }
}

document.addEventListener('keypress', (e) => {
  if (e.key === 'Enter' && document.getElementById('inputModal').classList.contains('active')) saveModalAnswer();
});
document.getElementById('inputOverlay').addEventListener('click', closeModal);

// ‚îÄ‚îÄ‚îÄ GAME LOGIC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function promptSecretCode() {
  var code = prompt("Enter secret code for a bonus lifeline:");
  if (code && code.toUpperCase() === "RAD") {
    lifelinesRemaining++;
    updateLifelineUI();
    alert("üõ°Ô∏è Bonus lifeline unlocked!");
  } else if (code) {
    alert("Sorry, that code is not valid. Keep looking!");
  }
}

/* === UNLOCK SYSTEM === */
function getTodayStr() { return new Date().toISOString().slice(0,10); }
function getBonusPlays() { var k='bonusPlays_'+getTodayStr(); return parseInt(localStorage.getItem(k)||'0'); }
function addBonusPlay(n) { var k='bonusPlays_'+getTodayStr(); var v=getBonusPlays()+n; localStorage.setItem(k,v); return v; }
function getUnlockType() { return localStorage.getItem('unlockType_'+getTodayStr())||''; }
function setUnlockType(t) { localStorage.setItem('unlockType_'+getTodayStr(),t); }
function hasEmailedToday() { return localStorage.getItem('emailUnlock_'+getTodayStr())==='1'; }
function setEmailedToday() { localStorage.setItem('emailUnlock_'+getTodayStr(),'1'); }
function getEffectiveDailyLimit() { if(getUnlockType()==='unlimited') return 9999; return DAILY_LIMIT+getBonusPlays(); }

function showUnlockPanel() {
  var p=document.getElementById('unlockPanel'); if(p) p.classList.add('show');
}
function hideUnlockPanel() {
  var p=document.getElementById('unlockPanel'); if(p) p.classList.remove('show');
}

function submitUnlockCode() {
  var input=document.getElementById('unlockCodeInput');
  var code=input.value.trim().toUpperCase();
  if(!code){alert('Enter a code first!');return;}
  if(code==='MAGIC'){
    setUnlockType('unlimited');
    showUnlockSuccess('\u267e\ufe0f','Unlimited mode activated! Play all you want today!');
    setTimeout(function(){hideUnlockPanel();updateNavStatus();},2000);
  } else if(code==='LEN'){
    addBonusPlay(1);
    showUnlockSuccess('\uD83C\uDF89\uD83C\uDFB8','Code accepted! Bonus quiz unlocked \u2014 go crush it!');
    setTimeout(function(){hideUnlockPanel();updateNavStatus();},2000);
  } else {
    alert('Sorry, that code is not valid. Keep looking!');
    input.value='';input.focus();
  }
}

function toggleUnlockEmail() {
  if(hasEmailedToday()){alert('You already unlocked a bonus quiz with your email today!');return;}
  var el=document.getElementById('unlockEmailExpand');
  el.classList.toggle('show');
  if(el.classList.contains('show')) document.getElementById('unlockEmailInput').focus();
}

function submitUnlockEmail() {
  var email=document.getElementById('unlockEmailInput').value.trim();
  if(!email||!email.includes('@')){alert('Please enter a valid email address.');return;}
  fetch('https://formspree.io/f/xqedyjjd',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,source:'unlock-bonus',quiz:QUIZ_NUM||0,date:getTodayStr()})}).then(function(){}).catch(function(){});
  setEmailedToday();
  addBonusPlay(1);
  document.getElementById('unlockEmailExpand').classList.remove('show');
  showUnlockSuccess('\uD83C\uDF89\uD83C\uDFB8','Bonus quiz unlocked! Check your inbox for 80s goodies.');
  setTimeout(function(){hideUnlockPanel();updateNavStatus();},2000);
}

function showUnlockSuccess(emoji,text) {
  var el=document.getElementById('unlockSuccess');
  document.getElementById('unlockSuccessEmoji').textContent=emoji;
  document.getElementById('unlockSuccessText').textContent=text;
  el.classList.add('show');
}

function promptSecretCode() {
  var code=prompt('Enter secret code for a bonus lifeline:');
  if(code&&code.toUpperCase()==='RAD'){lifelinesRemaining++;updateLifelineUI();alert('\uD83D\uDEE1\ufe0f Bonus lifeline unlocked!');}
  else if(code){alert('Sorry, that code is not valid. Keep looking!');}
}
/* === END UNLOCK SYSTEM === */

function normalizeString(str) {
  return str.toLowerCase().replace(/[''']/g,'').replace(/[^a-z0-9\s]/g,'').replace(/\s+/g,' ').trim();
}

function getTodayKey() { return 'quizzesPlayed_' + new Date().toISOString().slice(0,10); }
function getQuizzesPlayedToday() { return parseInt(localStorage.getItem(getTodayKey()) || '0'); }
function incrementQuizzesPlayedToday() { const k=getTodayKey(); const n=getQuizzesPlayedToday()+1; localStorage.setItem(k,n); return n; }

function checkAnswers() {
  if (getQuizzesPlayedToday() >= DAILY_LIMIT) { document.getElementById('limitModal').classList.add('show'); return; }
  const cells = document.querySelectorAll('.cell');
  let correct = 0, total = 0;
  cells.forEach(cell => {
    const input = cell.querySelector('input');
    const userAnswer = normalizeString(input.value);
    const key = `${cell.dataset.row}-${cell.dataset.col}`;
    if (userAnswer) {
      total++;
      const valid = answers[key].map(a => normalizeString(a));
      if (valid.some(a => userAnswer === a || userAnswer.includes(a) || a.includes(userAnswer))) {
        cell.classList.add('correct'); cell.classList.remove('incorrect'); correct++;
      } else {
        cell.classList.add('incorrect'); cell.classList.remove('correct');
      }
    }
  });
  if (total === 0) { alert('Fill in some answers first!'); return; }
  if (!sessionStorage.getItem(SESSION_KEY)) {
    let plays = parseInt(localStorage.getItem(PLAYS_KEY) || '100'); plays++;
    localStorage.setItem(PLAYS_KEY, plays); updatePlaysCounter();
    sessionStorage.setItem(SESSION_KEY, 'true');
    incrementQuizzesPlayedToday();
    const tot = parseInt(localStorage.getItem('totalQuizzesPlayed') || '0') + 1;
    localStorage.setItem('totalQuizzesPlayed', tot);
    updateStreak();
    const best = parseInt(localStorage.getItem('bestQuizScore') || '0');
    if (correct > best) localStorage.setItem('bestQuizScore', correct);
  }
  localStorage.setItem(QUIZ_KEY, correct);
  document.getElementById('score').textContent = `You got ${correct} out of ${total} correct!`;
  // Show no-lifeline badge if they never used one
  if (lifelinesRemaining === 3) {
    document.getElementById('noLifelineBadge').style.display = 'block';
  }
  document.getElementById('results').style.display = 'block';
showSurveyIfNeeded();
  if (correct >= 8 && total === 9) setTimeout(() => { document.getElementById('highScoreEntry').style.display = 'block'; document.getElementById('initial1').focus(); }, 1000);
  displayLeaderboard();
}

function updatePlaysCounter() {
  let plays = parseInt(localStorage.getItem(PLAYS_KEY) || '100');
  document.getElementById('playsCounter').textContent = `üéÆ ${plays.toLocaleString()} plays`;
}

function showLeaderboard() { displayLeaderboard(); document.getElementById('leaderboard').scrollIntoView({ behavior:'smooth' }); }

function shareScore() {
  const shareText = `üé∏ Test your 80s music knowledge! Play Len's 80sGrid.com Music Edition: https://80sgrid.com/`;
  if (navigator.share) { navigator.share({ title:"Len's 80sGrid.com", text: shareText }).catch(()=>{}); }
  else { navigator.clipboard.writeText(shareText).then(()=>{ alert('Link copied!'); }).catch(()=>{ alert(shareText); }); }
}

function resetGrid() {
  document.querySelectorAll('.cell input').forEach(i => { i.value=''; i.parentElement.classList.remove('correct','incorrect'); });
  document.getElementById('results').style.display = 'none';
  document.getElementById('highScoreEntry').style.display = 'none';
  document.getElementById('noLifelineBadge').style.display = 'none';
  // Reset lifelines
  lifelinesRemaining = 3;
  const btnEl = document.getElementById('mcToggleBtn');
  if (btnEl) { btnEl.disabled = false; btnEl.style.opacity = '1'; btnEl.style.cursor = 'pointer'; btnEl.title = ''; }
  updateLifelineUI();
}

function updateStreak() {
  const today = new Date().toISOString().slice(0,10);
  const lastPlayed = localStorage.getItem('lastPlayedDate');
  let streak = parseInt(localStorage.getItem('playStreak') || '0');
  if (lastPlayed === today) return;
  const yesterday = new Date(Date.now() - 86400000).toISOString().slice(0,10);
  streak = (lastPlayed === yesterday) ? streak + 1 : 1;
  localStorage.setItem('playStreak', streak);
  localStorage.setItem('lastPlayedDate', today);
}

function loadStats() {
  const today = getQuizzesPlayedToday();
  const total = parseInt(localStorage.getItem('totalQuizzesPlayed') || '0');
  let cum = 0; for(let i=1;i<=8;i++) cum += parseInt(localStorage.getItem('quiz'+i+'Score')||0);
  const best = parseInt(localStorage.getItem('bestQuizScore') || '0');
  const streak = parseInt(localStorage.getItem('playStreak') || '0');
  document.getElementById('statToday').textContent = today + ' / ' + DAILY_LIMIT;
  document.getElementById('statTotal').textContent = total;
  document.getElementById('statCumulative').textContent = cum + '/72';
  document.getElementById('statBest').textContent = best + '/9';
  document.getElementById('statStreak').textContent = streak + ' days';
}
function toggleStats() { loadStats(); document.getElementById('statsModal').classList.toggle('show'); }
function toggleHowToPlay() {
  const box = document.getElementById('howToPlayBox');
  box.style.display = box.style.display === 'none' ? 'block' : 'none';
}

function saveHighScore() {
  const i1 = document.getElementById('initial1').value.toUpperCase();
  const i2 = document.getElementById('initial2').value.toUpperCase();
  const i3 = document.getElementById('initial3').value.toUpperCase();
  if (!i1||!i2||!i3) { alert('Please enter all 3 initials!'); return; }
  let totalCorrect = 0; let quizzesPlayed = 0;
  for(let i=1;i<=8;i++) { const s=parseInt(localStorage.getItem('quiz'+i+'Score')||0); totalCorrect+=s; if(s>0) quizzesPlayed++; }
  const possible = quizzesPlayed * 9;
  const pct = possible > 0 ? Math.round((totalCorrect / possible) * 100) : 0;
  if (pct >= 80) {
    let scores = JSON.parse(localStorage.getItem('80sGridScoresCombined')||'[]');
    scores.push({ initials: i1+i2+i3, pct, quizzes: quizzesPlayed, date: new Date().toLocaleDateString('en-US',{month:'numeric',day:'numeric',year:'2-digit'}) });
    scores.sort((a,b)=>b.pct-a.pct); scores = scores.slice(0,10);
    localStorage.setItem('80sGridScoresCombined', JSON.stringify(scores));
  }
  document.getElementById('highScoreEntry').style.display = 'none';
  displayLeaderboard();
}

function displayLeaderboard() {
  let scores = JSON.parse(localStorage.getItem('80sGridScoresCombined')||'[]');
  const fakeScores = [
    {initials:'ACE',pct:100,quizzes:8,date:'2/1/26'},{initials:'MAX',pct:96,quizzes:8,date:'2/3/26'},
    {initials:'ROX',pct:93,quizzes:8,date:'2/5/26'},{initials:'JAX',pct:89,quizzes:8,date:'2/8/26'},
    {initials:'ZEN',pct:89,quizzes:6,date:'2/10/26'},{initials:'VIX',pct:85,quizzes:8,date:'2/12/26'},
    {initials:'RAD',pct:85,quizzes:5,date:'2/14/26'},{initials:'SKY',pct:82,quizzes:8,date:'2/15/26'},
    {initials:'NEO',pct:81,quizzes:6,date:'2/16/26'},{initials:'LUX',pct:80,quizzes:8,date:'2/16/26'}
  ];
  if (scores.length < 10) scores = [...scores,...fakeScores].slice(0,10);
  scores.sort((a,b)=>b.pct-a.pct);
  document.getElementById('leaderboardList').innerHTML = scores.map((s,i)=>`
    <div class="leaderboard-item">
      <span class="leaderboard-rank">${String(i+1).padStart(2,'0')}.</span>
      <span class="leaderboard-initials">${s.initials}</span>
      <span class="leaderboard-score">${s.pct}%</span>
      <span class="leaderboard-date">${s.date}</span>
    </div>`).join('');
  document.getElementById('leaderboard').style.display = 'block';
}

document.getElementById('initial1').addEventListener('input', function(){ if(this.value) document.getElementById('initial2').focus(); });
document.getElementById('initial2').addEventListener('input', function(){ if(this.value) document.getElementById('initial3').focus(); });
document.getElementById('initial3').addEventListener('keypress', function(e){ if(e.key==='Enter') saveHighScore(); });
/* ===== GROUP TAB NAV ===== */
const ALL_NAV_QUIZZES=[{n:1,f:'index.html',c:'easy'},{n:2,f:'quiz2.html',c:'medium'},{n:3,f:'quiz3.html',c:'medium'},{n:4,f:'quiz4.html',c:'hard'},{n:5,f:'quiz5.html',c:'medium'},{n:6,f:'quiz6.html',c:'medium'},{n:7,f:'quiz7.html',c:'easy'},{n:8,f:'quiz8.html',c:'medium'},{n:9,f:'quiz9.html',c:'easy'},{n:10,f:'quiz10.html',c:'medium'},{n:11,f:'quiz11.html',c:'hard'},{n:12,f:'quiz12.html',c:'medium'},{n:13,f:'quiz13.html',c:'medium'},{n:14,f:'quiz14.html',c:'medium'},{n:15,f:'quiz15.html',c:'hard'},{n:16,f:'quiz16.html',c:'easy'},{n:17,f:'quiz17.html',c:'medium'},{n:18,f:'quiz18.html',c:'hard'},{n:19,f:'quiz19.html',c:'easy'},{n:20,f:'quiz20.html',c:'hard'},{n:21,f:'quiz21.html',c:'medium'},{n:22,f:'quiz22.html',c:'easy'},{n:23,f:'quiz23.html',c:'hard'},{n:24,f:'quiz24.html',c:'easy'},{n:25,f:'quiz25.html',c:'hard'},{n:26,f:'quiz26.html',c:'hard'},{n:27,f:'quiz27.html',c:'medium'},{n:28,f:'quiz28.html',c:'medium'},{n:29,f:'quiz29.html',c:'medium'},{n:30,f:'quiz30.html',c:'hard'},{n:31,f:'quiz31.html',c:'hard'},{n:32,f:'quiz32.html',c:'hard'},{n:33,f:'quiz33.html',c:'medium'},{n:34,f:'quiz34.html',c:'hard'},{n:35,f:'quiz35.html',c:'hard'},{n:36,f:'quiz36.html',c:'medium'}];
const NAV_GROUPS=[ALL_NAV_QUIZZES.slice(0,10),ALL_NAV_QUIZZES.slice(10,20),ALL_NAV_QUIZZES.slice(20,30),ALL_NAV_QUIZZES.slice(30)];
const GROUP_LABELS=['1 \u2013 10','11 \u2013 20','21 \u2013 30','31 \u2013 40'];
var navActiveGroup=QUIZ_NUM<=10?0:QUIZ_NUM<=20?1:QUIZ_NUM<=30?2:3;
function hasPlayedQuiz(n){var key=n===1?'quiz1Score':'quiz'+n+'Score';return parseInt(localStorage.getItem(key)||'0')>0;}
function showNavGroup(idx){
  navActiveGroup=idx;
  document.querySelectorAll('.group-tab').forEach(function(t,i){t.classList.toggle('active',i===idx);});
  renderNavGrid();
}
function renderNavGrid(){
  var grid=document.getElementById('quizGridNav');if(!grid)return;
  grid.innerHTML='';
  var tabs=document.getElementById('groupTabs');
  if(tabs&&!tabs.hasChildNodes()){
    GROUP_LABELS.forEach(function(label,i){
      var d=document.createElement('div');d.className='group-tab'+(i===navActiveGroup?' active':'');
      d.textContent=label;d.onclick=function(){showNavGroup(i);};tabs.appendChild(d);
    });
  }
  var quizzes=NAV_GROUPS[navActiveGroup]||[];
  quizzes.forEach(function(q){
    var a=document.createElement('a');
    var played=hasPlayedQuiz(q.n);var isCurrent=q.n===QUIZ_NUM;
    a.className=played?'played'+(isCurrent?' current':''):q.c+(isCurrent?' current':'');
    a.textContent=q.n;a.href=q.f;grid.appendChild(a);
  });
  updateNavStatus();
}
function updateNavStatus(){
  var bar=document.getElementById("navStatusBar");if(!bar)return;
  var played=getQuizzesPlayedToday();
  var limit=(typeof getEffectiveDailyLimit==="function")?getEffectiveDailyLimit():DAILY_LIMIT;
  var isUnlimited=(typeof getUnlockType==="function")&&getUnlockType()==="unlimited";
  var panel=document.getElementById("unlockPanel");
  if(isUnlimited){
    bar.innerHTML="\u267e\ufe0f Unlimited mode active!";bar.className="nav-status-bar unlimited";
    if(panel)panel.classList.remove("show");
  } else if(played>=limit){
    bar.innerHTML="\uD83D\uDEAB Daily limit reached \u2014 replay completed quizzes or unlock more below!";bar.className="nav-status-bar limit-reached";
    if(panel)panel.classList.add("show");
  } else {
    bar.innerHTML="\uD83D\uDD79\ufe0f "+(limit-played)+" of "+limit+" plays remaining today";bar.className="nav-status-bar";
    if(panel)panel.classList.remove("show");
  }
}
function initNav(){renderNavGrid();}
/* ===== END NAV ===== */

document.addEventListener('DOMContentLoaded', () => {
    initNav(); initializeCells(); updatePlaysCounter(); displayLeaderboard(); updateLifelineUI(); });
</script>
</body>
</html>
